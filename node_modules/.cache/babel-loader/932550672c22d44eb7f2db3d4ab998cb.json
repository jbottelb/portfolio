{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime-corejs3/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _getIterator = require(\"@babel/runtime-corejs3/core-js/get-iterator\");\n\nvar _Array$isArray2 = require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\");\n\nvar _getIteratorMethod = require(\"@babel/runtime-corejs3/core-js/get-iterator-method\");\n\nvar _Symbol = require(\"@babel/runtime-corejs3/core-js-stable/symbol\");\n\nvar _Array$from = require(\"@babel/runtime-corejs3/core-js-stable/array/from\");\n\nvar _sliceInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/slice\");\n\nvar _Object$defineProperty2 = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _Object$defineProperties = require(\"@babel/runtime-corejs3/core-js-stable/object/define-properties\");\n\nvar _Object$getOwnPropertyDescriptors = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors\");\n\nvar _forEachInstanceProperty2 = require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\");\n\nvar _Object$getOwnPropertyDescriptor = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor\");\n\nvar _filterInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\");\n\nvar _Object$getOwnPropertySymbols = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols\");\n\nvar _Object$keys2 = require(\"@babel/runtime-corejs3/core-js-stable/object/keys\");\n\n_Object$defineProperty2(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _find = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/find\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\"));\n\nvar _create = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/create\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _getPrototypeOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/get-prototype-of\"));\n\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\n\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\n\nvar _freeze = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/freeze\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _defineProperty3 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\n\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\n\nvar _canBeSerialized = _interopRequireDefault(require(\"./canBeSerialized\"));\n\nvar _decode = _interopRequireDefault(require(\"./decode\"));\n\nvar _encode = _interopRequireDefault(require(\"./encode\"));\n\nvar _escape2 = _interopRequireDefault(require(\"./escape\"));\n\nvar _EventuallyQueue = _interopRequireDefault(require(\"./EventuallyQueue\"));\n\nvar _ParseACL = _interopRequireDefault(require(\"./ParseACL\"));\n\nvar _parseDate = _interopRequireDefault(require(\"./parseDate\"));\n\nvar _ParseError = _interopRequireDefault(require(\"./ParseError\"));\n\nvar _ParseFile = _interopRequireDefault(require(\"./ParseFile\"));\n\nvar _promiseUtils = require(\"./promiseUtils\");\n\nvar _LocalDatastoreUtils = require(\"./LocalDatastoreUtils\");\n\nvar _ParseOp = require(\"./ParseOp\");\n\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\n\nvar _ParseRelation = _interopRequireDefault(require(\"./ParseRelation\"));\n\nvar SingleInstanceStateController = _interopRequireWildcard(require(\"./SingleInstanceStateController\"));\n\nvar _unique = _interopRequireDefault(require(\"./unique\"));\n\nvar UniqueInstanceStateController = _interopRequireWildcard(require(\"./UniqueInstanceStateController\"));\n\nvar _unsavedChildren = _interopRequireDefault(require(\"./unsavedChildren\"));\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof _Symbol === \"undefined\" || _getIteratorMethod(o) == null) {\n    if (_Array$isArray2(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = _getIterator(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  var _context18;\n\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n\n  var n = _sliceInstanceProperty(_context18 = Object.prototype.toString.call(o)).call(_context18, 8, -1);\n\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return _Array$from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = _Object$keys2(object);\n\n  if (_Object$getOwnPropertySymbols) {\n    var symbols = _Object$getOwnPropertySymbols(object);\n\n    if (enumerableOnly) symbols = _filterInstanceProperty(symbols).call(symbols, function (sym) {\n      return _Object$getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      var _context16;\n\n      _forEachInstanceProperty2(_context16 = ownKeys(Object(source), true)).call(_context16, function (key) {\n        (0, _defineProperty3.default)(target, key, source[key]);\n      });\n    } else if (_Object$getOwnPropertyDescriptors) {\n      _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source));\n    } else {\n      var _context17;\n\n      _forEachInstanceProperty2(_context17 = ownKeys(Object(source))).call(_context17, function (key) {\n        _Object$defineProperty2(target, key, _Object$getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar uuidv4 = require('./uuid');\n/*:: export type Pointer = {\n  __type: string,\n  className: string,\n  objectId: string,\n};*/\n\n/*:: type SaveParams = {\n  method: string,\n  path: string,\n  body: AttributeMap,\n};*/\n\n/*:: export type SaveOptions = FullOptions & {\n  cascadeSave?: boolean,\n  context?: AttributeMap,\n};*/\n// Mapping of class names to constructors, so we can populate objects from the\n// server with appropriate subclasses of ParseObject\n\n\nvar classMap = {}; // Global counter for generating unique Ids for non-single-instance objects\n\nvar objectCount = 0; // On web clients, objects are single-instance: any two objects with the same Id\n// will have the same attributes. However, this may be dangerous default\n// behavior in a server scenario\n\nvar singleInstance = !_CoreManager.default.get('IS_NODE');\n\nif (singleInstance) {\n  _CoreManager.default.setObjectStateController(SingleInstanceStateController);\n} else {\n  _CoreManager.default.setObjectStateController(UniqueInstanceStateController);\n}\n\nfunction getServerUrlPath() {\n  var serverUrl = _CoreManager.default.get('SERVER_URL');\n\n  if (serverUrl[serverUrl.length - 1] !== '/') {\n    serverUrl += '/';\n  }\n\n  var url = serverUrl.replace(/https?:\\/\\//, '');\n  return url.substr((0, _indexOf.default)(url).call(url, '/'));\n}\n/**\n * Creates a new model with defined attributes.\n *\n * <p>You won't normally call this method directly.  It is recommended that\n * you use a subclass of <code>Parse.Object</code> instead, created by calling\n * <code>extend</code>.</p>\n *\n * <p>However, if you don't want to use a subclass, or aren't sure which\n * subclass is appropriate, you can use this form:<pre>\n *     var object = new Parse.Object(\"ClassName\");\n * </pre>\n * That is basically equivalent to:<pre>\n *     var MyClass = Parse.Object.extend(\"ClassName\");\n *     var object = new MyClass();\n * </pre></p>\n *\n * @alias Parse.Object\n */\n\n\nvar ParseObject = /*#__PURE__*/function () {\n  /**\n   * @param {string} className The class name for the object\n   * @param {object} attributes The initial set of data to store in the object.\n   * @param {object} options The options for this object instance.\n   */\n  function ParseObject(className\n  /*: ?string | { className: string, [attr: string]: mixed }*/\n  , attributes\n  /*:: ?: { [attr: string]: mixed }*/\n  , options\n  /*:: ?: { ignoreValidation: boolean }*/\n  ) {\n    (0, _classCallCheck2.default)(this, ParseObject);\n    (0, _defineProperty3.default)(this, \"id\", void 0);\n    (0, _defineProperty3.default)(this, \"_localId\", void 0);\n    (0, _defineProperty3.default)(this, \"_objCount\", void 0);\n    (0, _defineProperty3.default)(this, \"className\", void 0); // Enable legacy initializers\n\n    if (typeof this.initialize === 'function') {\n      this.initialize.apply(this, arguments);\n    }\n\n    var toSet = null;\n    this._objCount = objectCount++;\n\n    if (typeof className === 'string') {\n      this.className = className;\n\n      if (attributes && (0, _typeof2.default)(attributes) === 'object') {\n        toSet = attributes;\n      }\n    } else if (className && (0, _typeof2.default)(className) === 'object') {\n      this.className = className.className;\n      toSet = {};\n\n      for (var _attr in className) {\n        if (_attr !== 'className') {\n          toSet[_attr] = className[_attr];\n        }\n      }\n\n      if (attributes && (0, _typeof2.default)(attributes) === 'object') {\n        options = attributes;\n      }\n    }\n\n    if (toSet && !this.set(toSet, options)) {\n      throw new Error(\"Can't create an invalid Parse Object\");\n    }\n  }\n  /**\n   * The ID of this object, unique within its class.\n   *\n   * @property {string} id\n   */\n\n\n  (0, _createClass2.default)(ParseObject, [{\n    key: \"attributes\",\n    get:\n    /** Prototype getters / setters **/\n    function ()\n    /*: AttributeMap*/\n    {\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      return (0, _freeze.default)(stateController.estimateAttributes(this._getStateIdentifier()));\n    }\n    /**\n     * The first time this object was saved on the server.\n     *\n     * @property {Date} createdAt\n     * @returns {Date}\n     */\n\n  }, {\n    key: \"createdAt\",\n    get: function ()\n    /*: ?Date*/\n    {\n      return this._getServerData().createdAt;\n    }\n    /**\n     * The last time this object was updated on the server.\n     *\n     * @property {Date} updatedAt\n     * @returns {Date}\n     */\n\n  }, {\n    key: \"updatedAt\",\n    get: function ()\n    /*: ?Date*/\n    {\n      return this._getServerData().updatedAt;\n    }\n    /** Private methods **/\n\n    /**\n     * Returns a local or server Id used uniquely identify this object\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: \"_getId\",\n    value: function ()\n    /*: string*/\n    {\n      if (typeof this.id === 'string') {\n        return this.id;\n      }\n\n      if (typeof this._localId === 'string') {\n        return this._localId;\n      }\n\n      var localId = 'local' + uuidv4();\n      this._localId = localId;\n      return localId;\n    }\n    /**\n     * Returns a unique identifier used to pull data from the State Controller.\n     *\n     * @returns {Parse.Object|object}\n     */\n\n  }, {\n    key: \"_getStateIdentifier\",\n    value: function ()\n    /*: ParseObject | { id: string, className: string }*/\n    {\n      if (singleInstance) {\n        var id = this.id;\n\n        if (!id) {\n          id = this._getId();\n        }\n\n        return {\n          id: id,\n          className: this.className\n        };\n      } else {\n        return this;\n      }\n    }\n  }, {\n    key: \"_getServerData\",\n    value: function ()\n    /*: AttributeMap*/\n    {\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      return stateController.getServerData(this._getStateIdentifier());\n    }\n  }, {\n    key: \"_clearServerData\",\n    value: function () {\n      var serverData = this._getServerData();\n\n      var unset = {};\n\n      for (var _attr2 in serverData) {\n        unset[_attr2] = undefined;\n      }\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      stateController.setServerData(this._getStateIdentifier(), unset);\n    }\n  }, {\n    key: \"_getPendingOps\",\n    value: function ()\n    /*: Array<OpsMap>*/\n    {\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      return stateController.getPendingOps(this._getStateIdentifier());\n    }\n    /**\n     * @param {Array<string>} [keysToClear] - if specified, only ops matching\n     * these fields will be cleared\n     */\n\n  }, {\n    key: \"_clearPendingOps\",\n    value: function (keysToClear\n    /*:: ?: Array<string>*/\n    ) {\n      var pending = this._getPendingOps();\n\n      var latest = pending[pending.length - 1];\n      var keys = keysToClear || (0, _keys.default)(latest);\n      (0, _forEach.default)(keys).call(keys, function (key) {\n        delete latest[key];\n      });\n    }\n  }, {\n    key: \"_getDirtyObjectAttributes\",\n    value: function ()\n    /*: AttributeMap*/\n    {\n      var attributes = this.attributes;\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      var objectCache = stateController.getObjectCache(this._getStateIdentifier());\n      var dirty = {};\n\n      for (var _attr3 in attributes) {\n        var val = attributes[_attr3];\n\n        if (val && (0, _typeof2.default)(val) === 'object' && !(val instanceof ParseObject) && !(val instanceof _ParseFile.default) && !(val instanceof _ParseRelation.default)) {\n          // Due to the way browsers construct maps, the key order will not change\n          // unless the object is changed\n          try {\n            var json = (0, _encode.default)(val, false, true);\n            var stringified = (0, _stringify.default)(json);\n\n            if (objectCache[_attr3] !== stringified) {\n              dirty[_attr3] = val;\n            }\n          } catch (e) {\n            // Error occurred, possibly by a nested unsaved pointer in a mutable container\n            // No matter how it happened, it indicates a change in the attribute\n            dirty[_attr3] = val;\n          }\n        }\n      }\n\n      return dirty;\n    }\n  }, {\n    key: \"_toFullJSON\",\n    value: function (seen\n    /*:: ?: Array<any>*/\n    , offline\n    /*:: ?: boolean*/\n    )\n    /*: AttributeMap*/\n    {\n      var json\n      /*: { [key: string]: mixed }*/\n      = this.toJSON(seen, offline);\n      json.__type = 'Object';\n      json.className = this.className;\n      return json;\n    }\n  }, {\n    key: \"_getSaveJSON\",\n    value: function ()\n    /*: AttributeMap*/\n    {\n      var pending = this._getPendingOps();\n\n      var dirtyObjects = this._getDirtyObjectAttributes();\n\n      var json = {};\n\n      for (var attr in dirtyObjects) {\n        var isDotNotation = false;\n\n        for (var i = 0; i < pending.length; i += 1) {\n          for (var field in pending[i]) {\n            // Dot notation operations are handled later\n            if ((0, _includes.default)(field).call(field, '.')) {\n              var fieldName = field.split('.')[0];\n\n              if (fieldName === attr) {\n                isDotNotation = true;\n                break;\n              }\n            }\n          }\n        }\n\n        if (!isDotNotation) {\n          json[attr] = new _ParseOp.SetOp(dirtyObjects[attr]).toJSON();\n        }\n      }\n\n      for (attr in pending[0]) {\n        json[attr] = pending[0][attr].toJSON();\n      }\n\n      return json;\n    }\n  }, {\n    key: \"_getSaveParams\",\n    value: function ()\n    /*: SaveParams*/\n    {\n      var method = this.id ? 'PUT' : 'POST';\n\n      var body = this._getSaveJSON();\n\n      var path = 'classes/' + this.className;\n\n      if (_CoreManager.default.get('ALLOW_CUSTOM_OBJECT_ID')) {\n        if (!this.createdAt) {\n          method = 'POST';\n          body.objectId = this.id;\n        } else {\n          method = 'PUT';\n          path += '/' + this.id;\n        }\n      } else if (this.id) {\n        path += '/' + this.id;\n      } else if (this.className === '_User') {\n        path = 'users';\n      }\n\n      return {\n        method: method,\n        body: body,\n        path: path\n      };\n    }\n  }, {\n    key: \"_finishFetch\",\n    value: function (serverData\n    /*: AttributeMap*/\n    ) {\n      if (!this.id && serverData.objectId) {\n        this.id = serverData.objectId;\n      }\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      stateController.initializeState(this._getStateIdentifier());\n      var decoded = {};\n\n      for (var _attr4 in serverData) {\n        if (_attr4 === 'ACL') {\n          decoded[_attr4] = new _ParseACL.default(serverData[_attr4]);\n        } else if (_attr4 !== 'objectId') {\n          decoded[_attr4] = (0, _decode.default)(serverData[_attr4]);\n\n          if (decoded[_attr4] instanceof _ParseRelation.default) {\n            decoded[_attr4]._ensureParentAndKey(this, _attr4);\n          }\n        }\n      }\n\n      if (decoded.createdAt && typeof decoded.createdAt === 'string') {\n        decoded.createdAt = (0, _parseDate.default)(decoded.createdAt);\n      }\n\n      if (decoded.updatedAt && typeof decoded.updatedAt === 'string') {\n        decoded.updatedAt = (0, _parseDate.default)(decoded.updatedAt);\n      }\n\n      if (!decoded.updatedAt && decoded.createdAt) {\n        decoded.updatedAt = decoded.createdAt;\n      }\n\n      stateController.commitServerChanges(this._getStateIdentifier(), decoded);\n    }\n  }, {\n    key: \"_setExisted\",\n    value: function (existed\n    /*: boolean*/\n    ) {\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      var state = stateController.getState(this._getStateIdentifier());\n\n      if (state) {\n        state.existed = existed;\n      }\n    }\n  }, {\n    key: \"_migrateId\",\n    value: function (serverId\n    /*: string*/\n    ) {\n      if (this._localId && serverId) {\n        if (singleInstance) {\n          var stateController = _CoreManager.default.getObjectStateController();\n\n          var oldState = stateController.removeState(this._getStateIdentifier());\n          this.id = serverId;\n          delete this._localId;\n\n          if (oldState) {\n            stateController.initializeState(this._getStateIdentifier(), oldState);\n          }\n        } else {\n          this.id = serverId;\n          delete this._localId;\n        }\n      }\n    }\n  }, {\n    key: \"_handleSaveResponse\",\n    value: function (response\n    /*: AttributeMap*/\n    , status\n    /*: number*/\n    ) {\n      var changes = {};\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      var pending = stateController.popPendingState(this._getStateIdentifier());\n\n      for (var attr in pending) {\n        if (pending[attr] instanceof _ParseOp.RelationOp) {\n          changes[attr] = pending[attr].applyTo(undefined, this, attr);\n        } else if (!(attr in response)) {\n          // Only SetOps and UnsetOps should not come back with results\n          changes[attr] = pending[attr].applyTo(undefined);\n        }\n      }\n\n      for (attr in response) {\n        if ((attr === 'createdAt' || attr === 'updatedAt') && typeof response[attr] === 'string') {\n          changes[attr] = (0, _parseDate.default)(response[attr]);\n        } else if (attr === 'ACL') {\n          changes[attr] = new _ParseACL.default(response[attr]);\n        } else if (attr !== 'objectId') {\n          var val = (0, _decode.default)(response[attr]);\n\n          if (val && (0, _getPrototypeOf.default)(val) === Object.prototype) {\n            changes[attr] = _objectSpread(_objectSpread({}, this.attributes[attr]), val);\n          } else {\n            changes[attr] = val;\n          }\n\n          if (changes[attr] instanceof _ParseOp.UnsetOp) {\n            changes[attr] = undefined;\n          }\n        }\n      }\n\n      if (changes.createdAt && !changes.updatedAt) {\n        changes.updatedAt = changes.createdAt;\n      }\n\n      this._migrateId(response.objectId);\n\n      if (status !== 201) {\n        this._setExisted(true);\n      }\n\n      stateController.commitServerChanges(this._getStateIdentifier(), changes);\n    }\n  }, {\n    key: \"_handleSaveError\",\n    value: function () {\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      stateController.mergeFirstPendingState(this._getStateIdentifier());\n    }\n  }, {\n    key: \"initialize\",\n    value:\n    /** Public methods **/\n    function () {// NOOP\n    }\n    /**\n     * Returns a JSON version of the object suitable for saving to Parse.\n     *\n     * @param seen\n     * @param offline\n     * @returns {object}\n     */\n\n  }, {\n    key: \"toJSON\",\n    value: function (seen\n    /*: Array<any> | void*/\n    , offline\n    /*:: ?: boolean*/\n    )\n    /*: AttributeMap*/\n    {\n      var seenEntry = this.id ? this.className + ':' + this.id : this;\n      seen = seen || [seenEntry];\n      var json = {};\n      var attrs = this.attributes;\n\n      for (var _attr5 in attrs) {\n        if ((_attr5 === 'createdAt' || _attr5 === 'updatedAt') && attrs[_attr5].toJSON) {\n          json[_attr5] = attrs[_attr5].toJSON();\n        } else {\n          json[_attr5] = (0, _encode.default)(attrs[_attr5], false, false, seen, offline);\n        }\n      }\n\n      var pending = this._getPendingOps();\n\n      for (var _attr6 in pending[0]) {\n        json[_attr6] = pending[0][_attr6].toJSON(offline);\n      }\n\n      if (this.id) {\n        json.objectId = this.id;\n      }\n\n      return json;\n    }\n    /**\n     * Determines whether this ParseObject is equal to another ParseObject\n     *\n     * @param {object} other - An other object ot compare\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"equals\",\n    value: function (other\n    /*: mixed*/\n    )\n    /*: boolean*/\n    {\n      if (this === other) {\n        return true;\n      }\n\n      return other instanceof ParseObject && this.className === other.className && this.id === other.id && typeof this.id !== 'undefined';\n    }\n    /**\n     * Returns true if this object has been modified since its last\n     * save/refresh.  If an attribute is specified, it returns true only if that\n     * particular attribute has been modified since the last save/refresh.\n     *\n     * @param {string} attr An attribute name (optional).\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"dirty\",\n    value: function (attr\n    /*:: ?: string*/\n    )\n    /*: boolean*/\n    {\n      if (!this.id) {\n        return true;\n      }\n\n      var pendingOps = this._getPendingOps();\n\n      var dirtyObjects = this._getDirtyObjectAttributes();\n\n      if (attr) {\n        if (dirtyObjects.hasOwnProperty(attr)) {\n          return true;\n        }\n\n        for (var i = 0; i < pendingOps.length; i++) {\n          if (pendingOps[i].hasOwnProperty(attr)) {\n            return true;\n          }\n        }\n\n        return false;\n      }\n\n      if ((0, _keys.default)(pendingOps[0]).length !== 0) {\n        return true;\n      }\n\n      if ((0, _keys.default)(dirtyObjects).length !== 0) {\n        return true;\n      }\n\n      return false;\n    }\n    /**\n     * Returns an array of keys that have been modified since last save/refresh\n     *\n     * @returns {string[]}\n     */\n\n  }, {\n    key: \"dirtyKeys\",\n    value: function ()\n    /*: Array<string>*/\n    {\n      var pendingOps = this._getPendingOps();\n\n      var keys = {};\n\n      for (var i = 0; i < pendingOps.length; i++) {\n        for (var _attr7 in pendingOps[i]) {\n          keys[_attr7] = true;\n        }\n      }\n\n      var dirtyObjects = this._getDirtyObjectAttributes();\n\n      for (var _attr8 in dirtyObjects) {\n        keys[_attr8] = true;\n      }\n\n      return (0, _keys.default)(keys);\n    }\n    /**\n     * Returns true if the object has been fetched.\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isDataAvailable\",\n    value: function ()\n    /*: boolean*/\n    {\n      var serverData = this._getServerData();\n\n      return !!(0, _keys.default)(serverData).length;\n    }\n    /**\n     * Gets a Pointer referencing this Object.\n     *\n     * @returns {Pointer}\n     */\n\n  }, {\n    key: \"toPointer\",\n    value: function ()\n    /*: Pointer*/\n    {\n      if (!this.id) {\n        throw new Error('Cannot create a pointer to an unsaved ParseObject');\n      }\n\n      return {\n        __type: 'Pointer',\n        className: this.className,\n        objectId: this.id\n      };\n    }\n    /**\n     * Gets a Pointer referencing this Object.\n     *\n     * @returns {Pointer}\n     */\n\n  }, {\n    key: \"toOfflinePointer\",\n    value: function ()\n    /*: Pointer*/\n    {\n      if (!this._localId) {\n        throw new Error('Cannot create a offline pointer to a saved ParseObject');\n      }\n\n      return {\n        __type: 'Object',\n        className: this.className,\n        _localId: this._localId\n      };\n    }\n    /**\n     * Gets the value of an attribute.\n     *\n     * @param {string} attr The string name of an attribute.\n     * @returns {*}\n     */\n\n  }, {\n    key: \"get\",\n    value: function (attr\n    /*: string*/\n    )\n    /*: mixed*/\n    {\n      return this.attributes[attr];\n    }\n    /**\n     * Gets a relation on the given class for the attribute.\n     *\n     * @param {string} attr The attribute to get the relation for.\n     * @returns {Parse.Relation}\n     */\n\n  }, {\n    key: \"relation\",\n    value: function (attr\n    /*: string*/\n    )\n    /*: ParseRelation*/\n    {\n      var value = this.get(attr);\n\n      if (value) {\n        if (!(value instanceof _ParseRelation.default)) {\n          throw new Error('Called relation() on non-relation field ' + attr);\n        }\n\n        value._ensureParentAndKey(this, attr);\n\n        return value;\n      }\n\n      return new _ParseRelation.default(this, attr);\n    }\n    /**\n     * Gets the HTML-escaped value of an attribute.\n     *\n     * @param {string} attr The string name of an attribute.\n     * @returns {string}\n     */\n\n  }, {\n    key: \"escape\",\n    value: function (attr\n    /*: string*/\n    )\n    /*: string*/\n    {\n      var val = this.attributes[attr];\n\n      if (val == null) {\n        return '';\n      }\n\n      if (typeof val !== 'string') {\n        if (typeof val.toString !== 'function') {\n          return '';\n        }\n\n        val = val.toString();\n      }\n\n      return (0, _escape2.default)(val);\n    }\n    /**\n     * Returns <code>true</code> if the attribute contains a value that is not\n     * null or undefined.\n     *\n     * @param {string} attr The string name of the attribute.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"has\",\n    value: function (attr\n    /*: string*/\n    )\n    /*: boolean*/\n    {\n      var attributes = this.attributes;\n\n      if (attributes.hasOwnProperty(attr)) {\n        return attributes[attr] != null;\n      }\n\n      return false;\n    }\n    /**\n     * Sets a hash of model attributes on the object.\n     *\n     * <p>You can call it with an object containing keys and values, with one\n     * key and value, or dot notation.  For example:<pre>\n     *   gameTurn.set({\n     *     player: player1,\n     *     diceRoll: 2\n     *   }, {\n     *     error: function(gameTurnAgain, error) {\n     *       // The set failed validation.\n     *     }\n     *   });\n     *\n     *   game.set(\"currentPlayer\", player2, {\n     *     error: function(gameTurnAgain, error) {\n     *       // The set failed validation.\n     *     }\n     *   });\n     *\n     *   game.set(\"finished\", true);</pre></p>\n     *\n     *   game.set(\"player.score\", 10);</pre></p>\n     *\n     * @param {(string|object)} key The key to set.\n     * @param {(string|object)} value The value to give it.\n     * @param {object} options A set of options for the set.\n     *     The only supported option is <code>error</code>.\n     * @returns {(ParseObject|boolean)} true if the set succeeded.\n     */\n\n  }, {\n    key: \"set\",\n    value: function (key\n    /*: mixed*/\n    , value\n    /*: mixed*/\n    , options\n    /*:: ?: mixed*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      var changes = {};\n      var newOps = {};\n\n      if (key && (0, _typeof2.default)(key) === 'object') {\n        changes = key;\n        options = value;\n      } else if (typeof key === 'string') {\n        changes[key] = value;\n      } else {\n        return this;\n      }\n\n      options = options || {};\n      var readonly = [];\n\n      if (typeof this.constructor.readOnlyAttributes === 'function') {\n        readonly = (0, _concat.default)(readonly).call(readonly, this.constructor.readOnlyAttributes());\n      }\n\n      for (var k in changes) {\n        if (k === 'createdAt' || k === 'updatedAt') {\n          // This property is read-only, but for legacy reasons we silently\n          // ignore it\n          continue;\n        }\n\n        if ((0, _indexOf.default)(readonly).call(readonly, k) > -1) {\n          throw new Error('Cannot modify readonly attribute: ' + k);\n        }\n\n        if (options.unset) {\n          newOps[k] = new _ParseOp.UnsetOp();\n        } else if (changes[k] instanceof _ParseOp.Op) {\n          newOps[k] = changes[k];\n        } else if (changes[k] && (0, _typeof2.default)(changes[k]) === 'object' && typeof changes[k].__op === 'string') {\n          newOps[k] = (0, _ParseOp.opFromJSON)(changes[k]);\n        } else if (k === 'objectId' || k === 'id') {\n          if (typeof changes[k] === 'string') {\n            this.id = changes[k];\n          }\n        } else if (k === 'ACL' && (0, _typeof2.default)(changes[k]) === 'object' && !(changes[k] instanceof _ParseACL.default)) {\n          newOps[k] = new _ParseOp.SetOp(new _ParseACL.default(changes[k]));\n        } else if (changes[k] instanceof _ParseRelation.default) {\n          var relation = new _ParseRelation.default(this, k);\n          relation.targetClassName = changes[k].targetClassName;\n          newOps[k] = new _ParseOp.SetOp(relation);\n        } else {\n          newOps[k] = new _ParseOp.SetOp(changes[k]);\n        }\n      }\n\n      var currentAttributes = this.attributes; // Calculate new values\n\n      var newValues = {};\n\n      for (var _attr9 in newOps) {\n        if (newOps[_attr9] instanceof _ParseOp.RelationOp) {\n          newValues[_attr9] = newOps[_attr9].applyTo(currentAttributes[_attr9], this, _attr9);\n        } else if (!(newOps[_attr9] instanceof _ParseOp.UnsetOp)) {\n          newValues[_attr9] = newOps[_attr9].applyTo(currentAttributes[_attr9]);\n        }\n      } // Validate changes\n\n\n      if (!options.ignoreValidation) {\n        var validation = this.validate(newValues);\n\n        if (validation) {\n          if (typeof options.error === 'function') {\n            options.error(this, validation);\n          }\n\n          return false;\n        }\n      } // Consolidate Ops\n\n\n      var pendingOps = this._getPendingOps();\n\n      var last = pendingOps.length - 1;\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      for (var _attr10 in newOps) {\n        var nextOp = newOps[_attr10].mergeWith(pendingOps[last][_attr10]);\n\n        stateController.setPendingOp(this._getStateIdentifier(), _attr10, nextOp);\n      }\n\n      return this;\n    }\n    /**\n     * Remove an attribute from the model. This is a noop if the attribute doesn't\n     * exist.\n     *\n     * @param {string} attr The string name of an attribute.\n     * @param options\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"unset\",\n    value: function (attr\n    /*: string*/\n    , options\n    /*:: ?: { [opt: string]: mixed }*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      options = options || {};\n      options.unset = true;\n      return this.set(attr, null, options);\n    }\n    /**\n     * Atomically increments the value of the given attribute the next time the\n     * object is saved. If no amount is specified, 1 is used by default.\n     *\n     * @param attr {String} The key.\n     * @param amount {Number} The amount to increment by (optional).\n     * @returns {(ParseObject|boolean)}\n     */\n\n  }, {\n    key: \"increment\",\n    value: function (attr\n    /*: string*/\n    , amount\n    /*:: ?: number*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      if (typeof amount === 'undefined') {\n        amount = 1;\n      }\n\n      if (typeof amount !== 'number') {\n        throw new Error('Cannot increment by a non-numeric amount.');\n      }\n\n      return this.set(attr, new _ParseOp.IncrementOp(amount));\n    }\n    /**\n     * Atomically decrements the value of the given attribute the next time the\n     * object is saved. If no amount is specified, 1 is used by default.\n     *\n     * @param attr {String} The key.\n     * @param amount {Number} The amount to decrement by (optional).\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"decrement\",\n    value: function (attr\n    /*: string*/\n    , amount\n    /*:: ?: number*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      if (typeof amount === 'undefined') {\n        amount = 1;\n      }\n\n      if (typeof amount !== 'number') {\n        throw new Error('Cannot decrement by a non-numeric amount.');\n      }\n\n      return this.set(attr, new _ParseOp.IncrementOp(amount * -1));\n    }\n    /**\n     * Atomically add an object to the end of the array associated with a given\n     * key.\n     *\n     * @param attr {String} The key.\n     * @param item {} The item to add.\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"add\",\n    value: function (attr\n    /*: string*/\n    , item\n    /*: mixed*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set(attr, new _ParseOp.AddOp([item]));\n    }\n    /**\n     * Atomically add the objects to the end of the array associated with a given\n     * key.\n     *\n     * @param attr {String} The key.\n     * @param items {Object[]} The items to add.\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"addAll\",\n    value: function (attr\n    /*: string*/\n    , items\n    /*: Array<mixed>*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set(attr, new _ParseOp.AddOp(items));\n    }\n    /**\n     * Atomically add an object to the array associated with a given key, only\n     * if it is not already present in the array. The position of the insert is\n     * not guaranteed.\n     *\n     * @param attr {String} The key.\n     * @param item {} The object to add.\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"addUnique\",\n    value: function (attr\n    /*: string*/\n    , item\n    /*: mixed*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set(attr, new _ParseOp.AddUniqueOp([item]));\n    }\n    /**\n     * Atomically add the objects to the array associated with a given key, only\n     * if it is not already present in the array. The position of the insert is\n     * not guaranteed.\n     *\n     * @param attr {String} The key.\n     * @param items {Object[]} The objects to add.\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"addAllUnique\",\n    value: function (attr\n    /*: string*/\n    , items\n    /*: Array<mixed>*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set(attr, new _ParseOp.AddUniqueOp(items));\n    }\n    /**\n     * Atomically remove all instances of an object from the array associated\n     * with a given key.\n     *\n     * @param attr {String} The key.\n     * @param item {} The object to remove.\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"remove\",\n    value: function (attr\n    /*: string*/\n    , item\n    /*: mixed*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set(attr, new _ParseOp.RemoveOp([item]));\n    }\n    /**\n     * Atomically remove all instances of the objects from the array associated\n     * with a given key.\n     *\n     * @param attr {String} The key.\n     * @param items {Object[]} The object to remove.\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"removeAll\",\n    value: function (attr\n    /*: string*/\n    , items\n    /*: Array<mixed>*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set(attr, new _ParseOp.RemoveOp(items));\n    }\n    /**\n     * Returns an instance of a subclass of Parse.Op describing what kind of\n     * modification has been performed on this field since the last time it was\n     * saved. For example, after calling object.increment(\"x\"), calling\n     * object.op(\"x\") would return an instance of Parse.Op.Increment.\n     *\n     * @param attr {String} The key.\n     * @returns {Parse.Op} The operation, or undefined if none.\n     */\n\n  }, {\n    key: \"op\",\n    value: function (attr\n    /*: string*/\n    )\n    /*: ?Op*/\n    {\n      var pending = this._getPendingOps();\n\n      for (var i = pending.length; i--;) {\n        if (pending[i][attr]) {\n          return pending[i][attr];\n        }\n      }\n    }\n    /**\n     * Creates a new model with identical attributes to this one.\n     *\n     * @returns {Parse.Object}\n     */\n\n  }, {\n    key: \"clone\",\n    value: function clone()\n    /*: any*/\n    {\n      var clone = new this.constructor(this.className);\n      var attributes = this.attributes;\n\n      if (typeof this.constructor.readOnlyAttributes === 'function') {\n        var readonly = this.constructor.readOnlyAttributes() || []; // Attributes are frozen, so we have to rebuild an object,\n        // rather than delete readonly keys\n\n        var copy = {};\n\n        for (var a in attributes) {\n          if ((0, _indexOf.default)(readonly).call(readonly, a) < 0) {\n            copy[a] = attributes[a];\n          }\n        }\n\n        attributes = copy;\n      }\n\n      if (clone.set) {\n        clone.set(attributes);\n      }\n\n      return clone;\n    }\n    /**\n     * Creates a new instance of this object. Not to be confused with clone()\n     *\n     * @returns {Parse.Object}\n     */\n\n  }, {\n    key: \"newInstance\",\n    value: function ()\n    /*: any*/\n    {\n      var clone = new this.constructor(this.className);\n      clone.id = this.id;\n\n      if (singleInstance) {\n        // Just return an object with the right id\n        return clone;\n      }\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      if (stateController) {\n        stateController.duplicateState(this._getStateIdentifier(), clone._getStateIdentifier());\n      }\n\n      return clone;\n    }\n    /**\n     * Returns true if this object has never been saved to Parse.\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isNew\",\n    value: function ()\n    /*: boolean*/\n    {\n      return !this.id;\n    }\n    /**\n     * Returns true if this object was created by the Parse server when the\n     * object might have already been there (e.g. in the case of a Facebook\n     * login)\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"existed\",\n    value: function ()\n    /*: boolean*/\n    {\n      if (!this.id) {\n        return false;\n      }\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      var state = stateController.getState(this._getStateIdentifier());\n\n      if (state) {\n        return state.existed;\n      }\n\n      return false;\n    }\n    /**\n     * Returns true if this object exists on the Server\n     *\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     * </ul>\n     * @returns {Promise<boolean>} A boolean promise that is fulfilled if object exists.\n     */\n\n  }, {\n    key: \"exists\",\n    value: function () {\n      var _exists = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(options\n      /*:: ?: RequestOptions*/\n      ) {\n        var query;\n        return _regenerator.default.wrap(function (_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.id) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", false);\n\n              case 2:\n                _context.prev = 2;\n                query = new _ParseQuery.default(this.className);\n                _context.next = 6;\n                return query.get(this.id, options);\n\n              case 6:\n                return _context.abrupt(\"return\", true);\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](2);\n\n                if (!(_context.t0.code === _ParseError.default.OBJECT_NOT_FOUND)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", false);\n\n              case 13:\n                throw _context.t0;\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 9]]);\n      }));\n\n      return function () {\n        return _exists.apply(this, arguments);\n      };\n    }()\n    /**\n     * Checks if the model is currently in a valid state.\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isValid\",\n    value: function ()\n    /*: boolean*/\n    {\n      return !this.validate(this.attributes);\n    }\n    /**\n     * You should not call this function directly unless you subclass\n     * <code>Parse.Object</code>, in which case you can override this method\n     * to provide additional validation on <code>set</code> and\n     * <code>save</code>.  Your implementation should return\n     *\n     * @param {object} attrs The current data to validate.\n     * @returns {Parse.Error|boolean} False if the data is valid.  An error object otherwise.\n     * @see Parse.Object#set\n     */\n\n  }, {\n    key: \"validate\",\n    value: function (attrs\n    /*: AttributeMap*/\n    )\n    /*: ParseError | boolean*/\n    {\n      if (attrs.hasOwnProperty('ACL') && !(attrs.ACL instanceof _ParseACL.default)) {\n        return new _ParseError.default(_ParseError.default.OTHER_CAUSE, 'ACL must be a Parse ACL.');\n      }\n\n      for (var _key in attrs) {\n        if (!/^[A-Za-z][0-9A-Za-z_.]*$/.test(_key)) {\n          return new _ParseError.default(_ParseError.default.INVALID_KEY_NAME);\n        }\n      }\n\n      return false;\n    }\n    /**\n     * Returns the ACL for this object.\n     *\n     * @returns {Parse.ACL} An instance of Parse.ACL.\n     * @see Parse.Object#get\n     */\n\n  }, {\n    key: \"getACL\",\n    value: function ()\n    /*: ?ParseACL*/\n    {\n      var acl = this.get('ACL');\n\n      if (acl instanceof _ParseACL.default) {\n        return acl;\n      }\n\n      return null;\n    }\n    /**\n     * Sets the ACL to be used for this object.\n     *\n     * @param {Parse.ACL} acl An instance of Parse.ACL.\n     * @param {object} options\n     * @returns {(ParseObject | boolean)} Whether the set passed validation.\n     * @see Parse.Object#set\n     */\n\n  }, {\n    key: \"setACL\",\n    value: function (acl\n    /*: ParseACL*/\n    , options\n    /*:: ?: mixed*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set('ACL', acl, options);\n    }\n    /**\n     * Clears any (or specific) changes to this object made since the last call to save()\n     *\n     * @param {string} [keys] - specify which fields to revert\n     */\n\n  }, {\n    key: \"revert\",\n    value: function ()\n    /*: void*/\n    {\n      var keysToRevert;\n\n      for (var _len = arguments.length, keys = new Array(_len), _key2 = 0; _key2 < _len; _key2++) {\n        keys[_key2] = arguments[_key2];\n      }\n\n      if (keys.length) {\n        keysToRevert = [];\n\n        var _iterator = _createForOfIteratorHelper(keys),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _key3 = _step.value;\n\n            if (typeof _key3 === 'string') {\n              keysToRevert.push(_key3);\n            } else {\n              throw new Error('Parse.Object#revert expects either no, or a list of string, arguments.');\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n\n      this._clearPendingOps(keysToRevert);\n    }\n    /**\n     * Clears all attributes on a model\n     *\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"clear\",\n    value: function ()\n    /*: ParseObject | boolean*/\n    {\n      var attributes = this.attributes;\n      var erasable = {};\n      var readonly = ['createdAt', 'updatedAt'];\n\n      if (typeof this.constructor.readOnlyAttributes === 'function') {\n        readonly = (0, _concat.default)(readonly).call(readonly, this.constructor.readOnlyAttributes());\n      }\n\n      for (var _attr11 in attributes) {\n        if ((0, _indexOf.default)(readonly).call(readonly, _attr11) < 0) {\n          erasable[_attr11] = true;\n        }\n      }\n\n      return this.set(erasable, {\n        unset: true\n      });\n    }\n    /**\n     * Fetch the model from the server. If the server's representation of the\n     * model differs from its current attributes, they will be overriden.\n     *\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     *   <li>include: The name(s) of the key(s) to include. Can be a string, an array of strings,\n     *       or an array of array of strings.\n     *   <li>context: A dictionary that is accessible in Cloud Code `beforeFind` trigger.\n     * </ul>\n     * @returns {Promise} A promise that is fulfilled when the fetch\n     *     completes.\n     */\n\n  }, {\n    key: \"fetch\",\n    value: function (options\n    /*: RequestOptions*/\n    )\n    /*: Promise*/\n    {\n      options = options || {};\n      var fetchOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        fetchOptions.useMasterKey = options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken')) {\n        fetchOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('context') && (0, _typeof2.default)(options.context) === 'object') {\n        fetchOptions.context = options.context;\n      }\n\n      if (options.hasOwnProperty('include')) {\n        fetchOptions.include = [];\n\n        if ((0, _isArray.default)(options.include)) {\n          var _context2;\n\n          (0, _forEach.default)(_context2 = options.include).call(_context2, function (key) {\n            if ((0, _isArray.default)(key)) {\n              var _context3;\n\n              fetchOptions.include = (0, _concat.default)(_context3 = fetchOptions.include).call(_context3, key);\n            } else {\n              fetchOptions.include.push(key);\n            }\n          });\n        } else {\n          fetchOptions.include.push(options.include);\n        }\n      }\n\n      var controller = _CoreManager.default.getObjectController();\n\n      return controller.fetch(this, true, fetchOptions);\n    }\n    /**\n     * Fetch the model from the server. If the server's representation of the\n     * model differs from its current attributes, they will be overriden.\n     *\n     * Includes nested Parse.Objects for the provided key. You can use dot\n     * notation to specify which fields in the included object are also fetched.\n     *\n     * @param {string | Array<string | Array<string>>} keys The name(s) of the key(s) to include.\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     * </ul>\n     * @returns {Promise} A promise that is fulfilled when the fetch\n     *     completes.\n     */\n\n  }, {\n    key: \"fetchWithInclude\",\n    value: function (keys\n    /*: String | Array<string | Array<string>>*/\n    , options\n    /*: RequestOptions*/\n    )\n    /*: Promise*/\n    {\n      options = options || {};\n      options.include = keys;\n      return this.fetch(options);\n    }\n    /**\n     * Saves this object to the server at some unspecified time in the future,\n     * even if Parse is currently inaccessible.\n     *\n     * Use this when you may not have a solid network connection, and don't need to know when the save completes.\n     * If there is some problem with the object such that it can't be saved, it will be silently discarded.\n     *\n     * Objects saved with this method will be stored locally in an on-disk cache until they can be delivered to Parse.\n     * They will be sent immediately if possible. Otherwise, they will be sent the next time a network connection is\n     * available. Objects saved this way will persist even after the app is closed, in which case they will be sent the\n     * next time the app is opened.\n     *\n     * @param {object} [options]\n     * Used to pass option parameters to method if arg1 and arg2 were both passed as strings.\n     * Valid options are:\n     * <ul>\n     * <li>sessionToken: A valid session token, used for making a request on\n     * behalf of a specific user.\n     * <li>cascadeSave: If `false`, nested objects will not be saved (default is `true`).\n     * <li>context: A dictionary that is accessible in Cloud Code `beforeSave` and `afterSave` triggers.\n     * </ul>\n     * @returns {Promise} A promise that is fulfilled when the save\n     * completes.\n     */\n\n  }, {\n    key: \"saveEventually\",\n    value: function () {\n      var _saveEventually = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(options\n      /*: SaveOptions*/\n      ) {\n        return _regenerator.default.wrap(function (_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return this.save(null, options);\n\n              case 3:\n                _context4.next = 11;\n                break;\n\n              case 5:\n                _context4.prev = 5;\n                _context4.t0 = _context4[\"catch\"](0);\n\n                if (!(_context4.t0.message === 'XMLHttpRequest failed: \"Unable to connect to the Parse API\"')) {\n                  _context4.next = 11;\n                  break;\n                }\n\n                _context4.next = 10;\n                return _EventuallyQueue.default.save(this, options);\n\n              case 10:\n                _EventuallyQueue.default.poll();\n\n              case 11:\n                return _context4.abrupt(\"return\", this);\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee2, this, [[0, 5]]);\n      }));\n\n      return function () {\n        return _saveEventually.apply(this, arguments);\n      };\n    }()\n    /**\n     * Set a hash of model attributes, and save the model to the server.\n     * updatedAt will be updated when the request returns.\n     * You can either call it as:<pre>\n     * object.save();</pre>\n     * or<pre>\n     * object.save(attrs);</pre>\n     * or<pre>\n     * object.save(null, options);</pre>\n     * or<pre>\n     * object.save(attrs, options);</pre>\n     * or<pre>\n     * object.save(key, value);</pre>\n     * or<pre>\n     * object.save(key, value, options);</pre>\n     *\n     * Example 1: <pre>\n     * gameTurn.save({\n     * player: \"Jake Cutter\",\n     * diceRoll: 2\n     * }).then(function(gameTurnAgain) {\n     * // The save was successful.\n     * }, function(error) {\n     * // The save failed.  Error is an instance of Parse.Error.\n     * });</pre>\n     *\n     * Example 2: <pre>\n     * gameTurn.save(\"player\", \"Jake Cutter\");</pre>\n     *\n     * @param {string | object | null} [arg1]\n     * Valid options are:<ul>\n     * <li>`Object` - Key/value pairs to update on the object.</li>\n     * <li>`String` Key - Key of attribute to update (requires arg2 to also be string)</li>\n     * <li>`null` - Passing null for arg1 allows you to save the object with options passed in arg2.</li>\n     * </ul>\n     * @param {string | object} [arg2]\n     * <ul>\n     * <li>`String` Value - If arg1 was passed as a key, arg2 is the value that should be set on that key.</li>\n     * <li>`Object` Options - Valid options are:\n     * <ul>\n     * <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     * be used for this request.\n     * <li>sessionToken: A valid session token, used for making a request on\n     * behalf of a specific user.\n     * <li>cascadeSave: If `false`, nested objects will not be saved (default is `true`).\n     * <li>context: A dictionary that is accessible in Cloud Code `beforeSave` and `afterSave` triggers.\n     * </ul>\n     * </li>\n     * </ul>\n     * @param {object} [arg3]\n     * Used to pass option parameters to method if arg1 and arg2 were both passed as strings.\n     * Valid options are:\n     * <ul>\n     * <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     * be used for this request.\n     * <li>sessionToken: A valid session token, used for making a request on\n     * behalf of a specific user.\n     * <li>cascadeSave: If `false`, nested objects will not be saved (default is `true`).\n     * <li>context: A dictionary that is accessible in Cloud Code `beforeSave` and `afterSave` triggers.\n     * </ul>\n     * @returns {Promise} A promise that is fulfilled when the save\n     * completes.\n     */\n\n  }, {\n    key: \"save\",\n    value: function (arg1\n    /*: ?string | { [attr: string]: mixed }*/\n    , arg2\n    /*: SaveOptions | mixed*/\n    , arg3\n    /*:: ?: SaveOptions*/\n    )\n    /*: Promise*/\n    {\n      var _this = this;\n\n      var attrs;\n      var options;\n\n      if ((0, _typeof2.default)(arg1) === 'object' || typeof arg1 === 'undefined') {\n        attrs = arg1;\n\n        if ((0, _typeof2.default)(arg2) === 'object') {\n          options = arg2;\n        }\n      } else {\n        attrs = {};\n        attrs[arg1] = arg2;\n        options = arg3;\n      }\n\n      if (attrs) {\n        var validation = this.validate(attrs);\n\n        if (validation) {\n          return _promise.default.reject(validation);\n        }\n\n        this.set(attrs, options);\n      }\n\n      options = options || {};\n      var saveOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        saveOptions.useMasterKey = !!options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken') && typeof options.sessionToken === 'string') {\n        saveOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('installationId') && typeof options.installationId === 'string') {\n        saveOptions.installationId = options.installationId;\n      }\n\n      if (options.hasOwnProperty('context') && (0, _typeof2.default)(options.context) === 'object') {\n        saveOptions.context = options.context;\n      }\n\n      var controller = _CoreManager.default.getObjectController();\n\n      var unsaved = options.cascadeSave !== false ? (0, _unsavedChildren.default)(this) : null;\n      return controller.save(unsaved, saveOptions).then(function () {\n        return controller.save(_this, saveOptions);\n      });\n    }\n    /**\n     * Deletes this object from the server at some unspecified time in the future,\n     * even if Parse is currently inaccessible.\n     *\n     * Use this when you may not have a solid network connection,\n     * and don't need to know when the delete completes. If there is some problem with the object\n     * such that it can't be deleted, the request will be silently discarded.\n     *\n     * Delete instructions made with this method will be stored locally in an on-disk cache until they can be transmitted\n     * to Parse. They will be sent immediately if possible. Otherwise, they will be sent the next time a network connection\n     * is available. Delete requests will persist even after the app is closed, in which case they will be sent the\n     * next time the app is opened.\n     *\n     * @param {object} [options]\n     * Valid options are:<ul>\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     *   <li>context: A dictionary that is accessible in Cloud Code `beforeDelete` and `afterDelete` triggers.\n     * </ul>\n     * @returns {Promise} A promise that is fulfilled when the destroy\n     *     completes.\n     */\n\n  }, {\n    key: \"destroyEventually\",\n    value: function () {\n      var _destroyEventually = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(options\n      /*: RequestOptions*/\n      ) {\n        return _regenerator.default.wrap(function (_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return this.destroy(options);\n\n              case 3:\n                _context5.next = 11;\n                break;\n\n              case 5:\n                _context5.prev = 5;\n                _context5.t0 = _context5[\"catch\"](0);\n\n                if (!(_context5.t0.message === 'XMLHttpRequest failed: \"Unable to connect to the Parse API\"')) {\n                  _context5.next = 11;\n                  break;\n                }\n\n                _context5.next = 10;\n                return _EventuallyQueue.default.destroy(this, options);\n\n              case 10:\n                _EventuallyQueue.default.poll();\n\n              case 11:\n                return _context5.abrupt(\"return\", this);\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee3, this, [[0, 5]]);\n      }));\n\n      return function () {\n        return _destroyEventually.apply(this, arguments);\n      };\n    }()\n    /**\n     * Destroy this model on the server if it was already persisted.\n     *\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     *   <li>context: A dictionary that is accessible in Cloud Code `beforeDelete` and `afterDelete` triggers.\n     * </ul>\n     * @returns {Promise} A promise that is fulfilled when the destroy\n     *     completes.\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function (options\n    /*: RequestOptions*/\n    )\n    /*: Promise*/\n    {\n      options = options || {};\n      var destroyOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        destroyOptions.useMasterKey = options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken')) {\n        destroyOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('context') && (0, _typeof2.default)(options.context) === 'object') {\n        destroyOptions.context = options.context;\n      }\n\n      if (!this.id) {\n        return _promise.default.resolve();\n      }\n\n      return _CoreManager.default.getObjectController().destroy(this, destroyOptions);\n    }\n    /**\n     * Asynchronously stores the object and every object it points to in the local datastore,\n     * recursively, using a default pin name: _default.\n     *\n     * If those other objects have not been fetched from Parse, they will not be stored.\n     * However, if they have changed data, all the changes will be retained.\n     *\n     * <pre>\n     * await object.pin();\n     * </pre>\n     *\n     * To retrieve object:\n     * <code>query.fromLocalDatastore()</code> or <code>query.fromPin()</code>\n     *\n     * @returns {Promise} A promise that is fulfilled when the pin completes.\n     */\n\n  }, {\n    key: \"pin\",\n    value: function ()\n    /*: Promise<void>*/\n    {\n      return ParseObject.pinAllWithName(_LocalDatastoreUtils.DEFAULT_PIN, [this]);\n    }\n    /**\n     * Asynchronously removes the object and every object it points to in the local datastore,\n     * recursively, using a default pin name: _default.\n     *\n     * <pre>\n     * await object.unPin();\n     * </pre>\n     *\n     * @returns {Promise} A promise that is fulfilled when the unPin completes.\n     */\n\n  }, {\n    key: \"unPin\",\n    value: function ()\n    /*: Promise<void>*/\n    {\n      return ParseObject.unPinAllWithName(_LocalDatastoreUtils.DEFAULT_PIN, [this]);\n    }\n    /**\n     * Asynchronously returns if the object is pinned\n     *\n     * <pre>\n     * const isPinned = await object.isPinned();\n     * </pre>\n     *\n     * @returns {Promise<boolean>} A boolean promise that is fulfilled if object is pinned.\n     */\n\n  }, {\n    key: \"isPinned\",\n    value: function () {\n      var _isPinned = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4() {\n        var localDatastore, objectKey, pin;\n        return _regenerator.default.wrap(function (_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                localDatastore = _CoreManager.default.getLocalDatastore();\n\n                if (localDatastore.isEnabled) {\n                  _context6.next = 3;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", _promise.default.reject('Parse.enableLocalDatastore() must be called first'));\n\n              case 3:\n                objectKey = localDatastore.getKeyForObject(this);\n                _context6.next = 6;\n                return localDatastore.fromPinWithName(objectKey);\n\n              case 6:\n                pin = _context6.sent;\n                return _context6.abrupt(\"return\", pin.length > 0);\n\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      return function () {\n        return _isPinned.apply(this, arguments);\n      };\n    }()\n    /**\n     * Asynchronously stores the objects and every object they point to in the local datastore, recursively.\n     *\n     * If those other objects have not been fetched from Parse, they will not be stored.\n     * However, if they have changed data, all the changes will be retained.\n     *\n     * <pre>\n     * await object.pinWithName(name);\n     * </pre>\n     *\n     * To retrieve object:\n     * <code>query.fromLocalDatastore()</code> or <code>query.fromPinWithName(name)</code>\n     *\n     * @param {string} name Name of Pin.\n     * @returns {Promise} A promise that is fulfilled when the pin completes.\n     */\n\n  }, {\n    key: \"pinWithName\",\n    value: function (name\n    /*: string*/\n    )\n    /*: Promise<void>*/\n    {\n      return ParseObject.pinAllWithName(name, [this]);\n    }\n    /**\n     * Asynchronously removes the object and every object it points to in the local datastore, recursively.\n     *\n     * <pre>\n     * await object.unPinWithName(name);\n     * </pre>\n     *\n     * @param {string} name Name of Pin.\n     * @returns {Promise} A promise that is fulfilled when the unPin completes.\n     */\n\n  }, {\n    key: \"unPinWithName\",\n    value: function (name\n    /*: string*/\n    )\n    /*: Promise<void>*/\n    {\n      return ParseObject.unPinAllWithName(name, [this]);\n    }\n    /**\n     * Asynchronously loads data from the local datastore into this object.\n     *\n     * <pre>\n     * await object.fetchFromLocalDatastore();\n     * </pre>\n     *\n     * You can create an unfetched pointer with <code>Parse.Object.createWithoutData()</code>\n     * and then call <code>fetchFromLocalDatastore()</code> on it.\n     *\n     * @returns {Promise} A promise that is fulfilled when the fetch completes.\n     */\n\n  }, {\n    key: \"fetchFromLocalDatastore\",\n    value: function () {\n      var _fetchFromLocalDatastore = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5() {\n        var localDatastore, objectKey, pinned, result;\n        return _regenerator.default.wrap(function (_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                localDatastore = _CoreManager.default.getLocalDatastore();\n\n                if (localDatastore.isEnabled) {\n                  _context7.next = 3;\n                  break;\n                }\n\n                throw new Error('Parse.enableLocalDatastore() must be called first');\n\n              case 3:\n                objectKey = localDatastore.getKeyForObject(this);\n                _context7.next = 6;\n                return localDatastore._serializeObject(objectKey);\n\n              case 6:\n                pinned = _context7.sent;\n\n                if (pinned) {\n                  _context7.next = 9;\n                  break;\n                }\n\n                throw new Error('Cannot fetch an unsaved ParseObject');\n\n              case 9:\n                result = ParseObject.fromJSON(pinned);\n\n                this._finishFetch(result.toJSON());\n\n                return _context7.abrupt(\"return\", this);\n\n              case 12:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      return function () {\n        return _fetchFromLocalDatastore.apply(this, arguments);\n      };\n    }()\n    /** Static methods **/\n\n  }], [{\n    key: \"_getClassMap\",\n    value: function () {\n      return classMap;\n    }\n  }, {\n    key: \"_clearAllState\",\n    value: function () {\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      stateController.clearAllState();\n    }\n    /**\n     * Fetches the given list of Parse.Object.\n     * If any error is encountered, stops and calls the error handler.\n     *\n     * <pre>\n     *   Parse.Object.fetchAll([object1, object2, ...])\n     *    .then((list) => {\n     *      // All the objects were fetched.\n     *    }, (error) => {\n     *      // An error occurred while fetching one of the objects.\n     *    });\n     * </pre>\n     *\n     * @param {Array} list A list of <code>Parse.Object</code>.\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     *   <li>include: The name(s) of the key(s) to include. Can be a string, an array of strings,\n     *       or an array of array of strings.\n     * </ul>\n     * @static\n     * @returns {Parse.Object[]}\n     */\n\n  }, {\n    key: \"fetchAll\",\n    value: function (list\n    /*: Array<ParseObject>*/\n    ) {\n      var options\n      /*: RequestOptions*/\n      = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var queryOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        queryOptions.useMasterKey = options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken')) {\n        queryOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('include')) {\n        queryOptions.include = ParseObject.handleIncludeOptions(options);\n      }\n\n      return _CoreManager.default.getObjectController().fetch(list, true, queryOptions);\n    }\n    /**\n     * Fetches the given list of Parse.Object.\n     *\n     * Includes nested Parse.Objects for the provided key. You can use dot\n     * notation to specify which fields in the included object are also fetched.\n     *\n     * If any error is encountered, stops and calls the error handler.\n     *\n     * <pre>\n     *   Parse.Object.fetchAllWithInclude([object1, object2, ...], [pointer1, pointer2, ...])\n     *    .then((list) => {\n     *      // All the objects were fetched.\n     *    }, (error) => {\n     *      // An error occurred while fetching one of the objects.\n     *    });\n     * </pre>\n     *\n     * @param {Array} list A list of <code>Parse.Object</code>.\n     * @param {string | Array<string | Array<string>>} keys The name(s) of the key(s) to include.\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     * </ul>\n     * @static\n     * @returns {Parse.Object[]}\n     */\n\n  }, {\n    key: \"fetchAllWithInclude\",\n    value: function (list\n    /*: Array<ParseObject>*/\n    , keys\n    /*: String | Array<string | Array<string>>*/\n    , options\n    /*: RequestOptions*/\n    ) {\n      options = options || {};\n      options.include = keys;\n      return ParseObject.fetchAll(list, options);\n    }\n    /**\n     * Fetches the given list of Parse.Object if needed.\n     * If any error is encountered, stops and calls the error handler.\n     *\n     * Includes nested Parse.Objects for the provided key. You can use dot\n     * notation to specify which fields in the included object are also fetched.\n     *\n     * If any error is encountered, stops and calls the error handler.\n     *\n     * <pre>\n     *   Parse.Object.fetchAllIfNeededWithInclude([object1, object2, ...], [pointer1, pointer2, ...])\n     *    .then((list) => {\n     *      // All the objects were fetched.\n     *    }, (error) => {\n     *      // An error occurred while fetching one of the objects.\n     *    });\n     * </pre>\n     *\n     * @param {Array} list A list of <code>Parse.Object</code>.\n     * @param {string | Array<string | Array<string>>} keys The name(s) of the key(s) to include.\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     * </ul>\n     * @static\n     * @returns {Parse.Object[]}\n     */\n\n  }, {\n    key: \"fetchAllIfNeededWithInclude\",\n    value: function (list\n    /*: Array<ParseObject>*/\n    , keys\n    /*: String | Array<string | Array<string>>*/\n    , options\n    /*: RequestOptions*/\n    ) {\n      options = options || {};\n      options.include = keys;\n      return ParseObject.fetchAllIfNeeded(list, options);\n    }\n    /**\n     * Fetches the given list of Parse.Object if needed.\n     * If any error is encountered, stops and calls the error handler.\n     *\n     * <pre>\n     *   Parse.Object.fetchAllIfNeeded([object1, ...])\n     *    .then((list) => {\n     *      // Objects were fetched and updated.\n     *    }, (error) => {\n     *      // An error occurred while fetching one of the objects.\n     *    });\n     * </pre>\n     *\n     * @param {Array} list A list of <code>Parse.Object</code>.\n     * @param {object} options\n     * @static\n     * @returns {Parse.Object[]}\n     */\n\n  }, {\n    key: \"fetchAllIfNeeded\",\n    value: function (list\n    /*: Array<ParseObject>*/\n    , options) {\n      options = options || {};\n      var queryOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        queryOptions.useMasterKey = options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken')) {\n        queryOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('include')) {\n        queryOptions.include = ParseObject.handleIncludeOptions(options);\n      }\n\n      return _CoreManager.default.getObjectController().fetch(list, false, queryOptions);\n    }\n  }, {\n    key: \"handleIncludeOptions\",\n    value: function (options) {\n      var include = [];\n\n      if ((0, _isArray.default)(options.include)) {\n        var _context8;\n\n        (0, _forEach.default)(_context8 = options.include).call(_context8, function (key) {\n          if ((0, _isArray.default)(key)) {\n            include = (0, _concat.default)(include).call(include, key);\n          } else {\n            include.push(key);\n          }\n        });\n      } else {\n        include.push(options.include);\n      }\n\n      return include;\n    }\n    /**\n     * Destroy the given list of models on the server if it was already persisted.\n     *\n     * <p>Unlike saveAll, if an error occurs while deleting an individual model,\n     * this method will continue trying to delete the rest of the models if\n     * possible, except in the case of a fatal error like a connection error.\n     *\n     * <p>In particular, the Parse.Error object returned in the case of error may\n     * be one of two types:\n     *\n     * <ul>\n     * <li>A Parse.Error.AGGREGATE_ERROR. This object's \"errors\" property is an\n     * array of other Parse.Error objects. Each error object in this array\n     * has an \"object\" property that references the object that could not be\n     * deleted (for instance, because that object could not be found).</li>\n     * <li>A non-aggregate Parse.Error. This indicates a serious error that\n     * caused the delete operation to be aborted partway through (for\n     * instance, a connection failure in the middle of the delete).</li>\n     * </ul>\n     *\n     * <pre>\n     * Parse.Object.destroyAll([object1, object2, ...])\n     * .then((list) => {\n     * // All the objects were deleted.\n     * }, (error) => {\n     * // An error occurred while deleting one or more of the objects.\n     * // If this is an aggregate error, then we can inspect each error\n     * // object individually to determine the reason why a particular\n     * // object was not deleted.\n     * if (error.code === Parse.Error.AGGREGATE_ERROR) {\n     * for (var i = 0; i < error.errors.length; i++) {\n     * console.log(\"Couldn't delete \" + error.errors[i].object.id +\n     * \"due to \" + error.errors[i].message);\n     * }\n     * } else {\n     * console.log(\"Delete aborted because of \" + error.message);\n     * }\n     * });\n     * </pre>\n     *\n     * @param {Array} list A list of <code>Parse.Object</code>.\n     * @param {object} options\n     * @static\n     * @returns {Promise} A promise that is fulfilled when the destroyAll\n     * completes.\n     */\n\n  }, {\n    key: \"destroyAll\",\n    value: function (list\n    /*: Array<ParseObject>*/\n    ) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var destroyOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        destroyOptions.useMasterKey = options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken')) {\n        destroyOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('batchSize') && typeof options.batchSize === 'number') {\n        destroyOptions.batchSize = options.batchSize;\n      }\n\n      if (options.hasOwnProperty('context') && (0, _typeof2.default)(options.context) === 'object') {\n        destroyOptions.context = options.context;\n      }\n\n      return _CoreManager.default.getObjectController().destroy(list, destroyOptions);\n    }\n    /**\n     * Saves the given list of Parse.Object.\n     * If any error is encountered, stops and calls the error handler.\n     *\n     * <pre>\n     * Parse.Object.saveAll([object1, object2, ...])\n     * .then((list) => {\n     * // All the objects were saved.\n     * }, (error) => {\n     * // An error occurred while saving one of the objects.\n     * });\n     * </pre>\n     *\n     * @param {Array} list A list of <code>Parse.Object</code>.\n     * @param {object} options\n     * @static\n     * @returns {Parse.Object[]}\n     */\n\n  }, {\n    key: \"saveAll\",\n    value: function (list\n    /*: Array<ParseObject>*/\n    ) {\n      var options\n      /*: RequestOptions*/\n      = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var saveOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        saveOptions.useMasterKey = options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken')) {\n        saveOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('batchSize') && typeof options.batchSize === 'number') {\n        saveOptions.batchSize = options.batchSize;\n      }\n\n      if (options.hasOwnProperty('context') && (0, _typeof2.default)(options.context) === 'object') {\n        saveOptions.context = options.context;\n      }\n\n      return _CoreManager.default.getObjectController().save(list, saveOptions);\n    }\n    /**\n     * Creates a reference to a subclass of Parse.Object with the given id. This\n     * does not exist on Parse.Object, only on subclasses.\n     *\n     * <p>A shortcut for: <pre>\n     *  var Foo = Parse.Object.extend(\"Foo\");\n     *  var pointerToFoo = new Foo();\n     *  pointerToFoo.id = \"myObjectId\";\n     * </pre>\n     *\n     * @param {string} id The ID of the object to create a reference to.\n     * @static\n     * @returns {Parse.Object} A Parse.Object reference.\n     */\n\n  }, {\n    key: \"createWithoutData\",\n    value: function (id\n    /*: string*/\n    ) {\n      var obj = new this();\n      obj.id = id;\n      return obj;\n    }\n    /**\n     * Creates a new instance of a Parse Object from a JSON representation.\n     *\n     * @param {object} json The JSON map of the Object's data\n     * @param {boolean} override In single instance mode, all old server data\n     *   is overwritten if this is set to true\n     * @param {boolean} dirty Whether the Parse.Object should set JSON keys to dirty\n     * @static\n     * @returns {Parse.Object} A Parse.Object reference\n     */\n\n  }, {\n    key: \"fromJSON\",\n    value: function (json\n    /*: any*/\n    , override\n    /*:: ?: boolean*/\n    , dirty\n    /*:: ?: boolean*/\n    ) {\n      if (!json.className) {\n        throw new Error('Cannot create an object without a className');\n      }\n\n      var constructor = classMap[json.className];\n      var o = constructor ? new constructor(json.className) : new ParseObject(json.className);\n      var otherAttributes = {};\n\n      for (var _attr12 in json) {\n        if (_attr12 !== 'className' && _attr12 !== '__type') {\n          otherAttributes[_attr12] = json[_attr12];\n\n          if (dirty) {\n            o.set(_attr12, json[_attr12]);\n          }\n        }\n      }\n\n      if (override) {\n        // id needs to be set before clearServerData can work\n        if (otherAttributes.objectId) {\n          o.id = otherAttributes.objectId;\n        }\n\n        var preserved = null;\n\n        if (typeof o._preserveFieldsOnFetch === 'function') {\n          preserved = o._preserveFieldsOnFetch();\n        }\n\n        o._clearServerData();\n\n        if (preserved) {\n          o._finishFetch(preserved);\n        }\n      }\n\n      o._finishFetch(otherAttributes);\n\n      if (json.objectId) {\n        o._setExisted(true);\n      }\n\n      return o;\n    }\n    /**\n     * Registers a subclass of Parse.Object with a specific class name.\n     * When objects of that class are retrieved from a query, they will be\n     * instantiated with this subclass.\n     * This is only necessary when using ES6 subclassing.\n     *\n     * @param {string} className The class name of the subclass\n     * @param {Function} constructor The subclass\n     */\n\n  }, {\n    key: \"registerSubclass\",\n    value: function (className\n    /*: string*/\n    , constructor\n    /*: any*/\n    ) {\n      if (typeof className !== 'string') {\n        throw new TypeError('The first argument must be a valid class name.');\n      }\n\n      if (typeof constructor === 'undefined') {\n        throw new TypeError('You must supply a subclass constructor.');\n      }\n\n      if (typeof constructor !== 'function') {\n        throw new TypeError('You must register the subclass constructor. ' + 'Did you attempt to register an instance of the subclass?');\n      }\n\n      classMap[className] = constructor;\n\n      if (!constructor.className) {\n        constructor.className = className;\n      }\n    }\n    /**\n     * Unegisters a subclass of Parse.Object with a specific class name.\n     *\n     * @param {string} className The class name of the subclass\n     */\n\n  }, {\n    key: \"unregisterSubclass\",\n    value: function (className\n    /*: string*/\n    ) {\n      if (typeof className !== 'string') {\n        throw new TypeError('The first argument must be a valid class name.');\n      }\n\n      delete classMap[className];\n    }\n    /**\n     * Creates a new subclass of Parse.Object for the given Parse class name.\n     *\n     * <p>Every extension of a Parse class will inherit from the most recent\n     * previous extension of that class. When a Parse.Object is automatically\n     * created by parsing JSON, it will use the most recent extension of that\n     * class.</p>\n     *\n     * <p>You should call either:<pre>\n     *     var MyClass = Parse.Object.extend(\"MyClass\", {\n     *         <i>Instance methods</i>,\n     *         initialize: function(attrs, options) {\n     *             this.someInstanceProperty = [],\n     *             <i>Other instance properties</i>\n     *         }\n     *     }, {\n     *         <i>Class properties</i>\n     *     });</pre>\n     * or, for Backbone compatibility:<pre>\n     *     var MyClass = Parse.Object.extend({\n     *         className: \"MyClass\",\n     *         <i>Instance methods</i>,\n     *         initialize: function(attrs, options) {\n     *             this.someInstanceProperty = [],\n     *             <i>Other instance properties</i>\n     *         }\n     *     }, {\n     *         <i>Class properties</i>\n     *     });</pre></p>\n     *\n     * @param {string} className The name of the Parse class backing this model.\n     * @param {object} protoProps Instance properties to add to instances of the\n     *     class returned from this method.\n     * @param {object} classProps Class properties to add the class returned from\n     *     this method.\n     * @returns {Parse.Object} A new subclass of Parse.Object.\n     */\n\n  }, {\n    key: \"extend\",\n    value: function (className\n    /*: any*/\n    , protoProps\n    /*: any*/\n    , classProps\n    /*: any*/\n    ) {\n      if (typeof className !== 'string') {\n        if (className && typeof className.className === 'string') {\n          return ParseObject.extend(className.className, className, protoProps);\n        } else {\n          throw new Error(\"Parse.Object.extend's first argument should be the className.\");\n        }\n      }\n\n      var adjustedClassName = className;\n\n      if (adjustedClassName === 'User' && _CoreManager.default.get('PERFORM_USER_REWRITE')) {\n        adjustedClassName = '_User';\n      }\n\n      var parentProto = ParseObject.prototype;\n\n      if (this.hasOwnProperty('__super__') && this.__super__) {\n        parentProto = this.prototype;\n      } else if (classMap[adjustedClassName]) {\n        parentProto = classMap[adjustedClassName].prototype;\n      }\n\n      var ParseObjectSubclass = function (attributes, options) {\n        this.className = adjustedClassName;\n        this._objCount = objectCount++; // Enable legacy initializers\n\n        if (typeof this.initialize === 'function') {\n          this.initialize.apply(this, arguments);\n        }\n\n        if (attributes && (0, _typeof2.default)(attributes) === 'object') {\n          if (!this.set(attributes || {}, options)) {\n            throw new Error(\"Can't create an invalid Parse Object\");\n          }\n        }\n      };\n\n      ParseObjectSubclass.className = adjustedClassName;\n      ParseObjectSubclass.__super__ = parentProto;\n      ParseObjectSubclass.prototype = (0, _create.default)(parentProto, {\n        constructor: {\n          value: ParseObjectSubclass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n\n      if (protoProps) {\n        for (var prop in protoProps) {\n          if (prop !== 'className') {\n            (0, _defineProperty2.default)(ParseObjectSubclass.prototype, prop, {\n              value: protoProps[prop],\n              enumerable: false,\n              writable: true,\n              configurable: true\n            });\n          }\n        }\n      }\n\n      if (classProps) {\n        for (var _prop in classProps) {\n          if (_prop !== 'className') {\n            (0, _defineProperty2.default)(ParseObjectSubclass, _prop, {\n              value: classProps[_prop],\n              enumerable: false,\n              writable: true,\n              configurable: true\n            });\n          }\n        }\n      }\n\n      ParseObjectSubclass.extend = function (name, protoProps, classProps) {\n        if (typeof name === 'string') {\n          return ParseObject.extend.call(ParseObjectSubclass, name, protoProps, classProps);\n        }\n\n        return ParseObject.extend.call(ParseObjectSubclass, adjustedClassName, name, protoProps);\n      };\n\n      ParseObjectSubclass.createWithoutData = ParseObject.createWithoutData;\n      classMap[adjustedClassName] = ParseObjectSubclass;\n      return ParseObjectSubclass;\n    }\n    /**\n     * Enable single instance objects, where any local objects with the same Id\n     * share the same attributes, and stay synchronized with each other.\n     * This is disabled by default in server environments, since it can lead to\n     * security issues.\n     *\n     * @static\n     */\n\n  }, {\n    key: \"enableSingleInstance\",\n    value: function () {\n      singleInstance = true;\n\n      _CoreManager.default.setObjectStateController(SingleInstanceStateController);\n    }\n    /**\n     * Disable single instance objects, where any local objects with the same Id\n     * share the same attributes, and stay synchronized with each other.\n     * When disabled, you can have two instances of the same object in memory\n     * without them sharing attributes.\n     *\n     * @static\n     */\n\n  }, {\n    key: \"disableSingleInstance\",\n    value: function () {\n      singleInstance = false;\n\n      _CoreManager.default.setObjectStateController(UniqueInstanceStateController);\n    }\n    /**\n     * Asynchronously stores the objects and every object they point to in the local datastore,\n     * recursively, using a default pin name: _default.\n     *\n     * If those other objects have not been fetched from Parse, they will not be stored.\n     * However, if they have changed data, all the changes will be retained.\n     *\n     * <pre>\n     * await Parse.Object.pinAll([...]);\n     * </pre>\n     *\n     * To retrieve object:\n     * <code>query.fromLocalDatastore()</code> or <code>query.fromPin()</code>\n     *\n     * @param {Array} objects A list of <code>Parse.Object</code>.\n     * @returns {Promise} A promise that is fulfilled when the pin completes.\n     * @static\n     */\n\n  }, {\n    key: \"pinAll\",\n    value: function (objects\n    /*: Array<ParseObject>*/\n    )\n    /*: Promise<void>*/\n    {\n      var localDatastore = _CoreManager.default.getLocalDatastore();\n\n      if (!localDatastore.isEnabled) {\n        return _promise.default.reject('Parse.enableLocalDatastore() must be called first');\n      }\n\n      return ParseObject.pinAllWithName(_LocalDatastoreUtils.DEFAULT_PIN, objects);\n    }\n    /**\n     * Asynchronously stores the objects and every object they point to in the local datastore, recursively.\n     *\n     * If those other objects have not been fetched from Parse, they will not be stored.\n     * However, if they have changed data, all the changes will be retained.\n     *\n     * <pre>\n     * await Parse.Object.pinAllWithName(name, [obj1, obj2, ...]);\n     * </pre>\n     *\n     * To retrieve object:\n     * <code>query.fromLocalDatastore()</code> or <code>query.fromPinWithName(name)</code>\n     *\n     * @param {string} name Name of Pin.\n     * @param {Array} objects A list of <code>Parse.Object</code>.\n     * @returns {Promise} A promise that is fulfilled when the pin completes.\n     * @static\n     */\n\n  }, {\n    key: \"pinAllWithName\",\n    value: function (name\n    /*: string*/\n    , objects\n    /*: Array<ParseObject>*/\n    )\n    /*: Promise<void>*/\n    {\n      var localDatastore = _CoreManager.default.getLocalDatastore();\n\n      if (!localDatastore.isEnabled) {\n        return _promise.default.reject('Parse.enableLocalDatastore() must be called first');\n      }\n\n      return localDatastore._handlePinAllWithName(name, objects);\n    }\n    /**\n     * Asynchronously removes the objects and every object they point to in the local datastore,\n     * recursively, using a default pin name: _default.\n     *\n     * <pre>\n     * await Parse.Object.unPinAll([...]);\n     * </pre>\n     *\n     * @param {Array} objects A list of <code>Parse.Object</code>.\n     * @returns {Promise} A promise that is fulfilled when the unPin completes.\n     * @static\n     */\n\n  }, {\n    key: \"unPinAll\",\n    value: function (objects\n    /*: Array<ParseObject>*/\n    )\n    /*: Promise<void>*/\n    {\n      var localDatastore = _CoreManager.default.getLocalDatastore();\n\n      if (!localDatastore.isEnabled) {\n        return _promise.default.reject('Parse.enableLocalDatastore() must be called first');\n      }\n\n      return ParseObject.unPinAllWithName(_LocalDatastoreUtils.DEFAULT_PIN, objects);\n    }\n    /**\n     * Asynchronously removes the objects and every object they point to in the local datastore, recursively.\n     *\n     * <pre>\n     * await Parse.Object.unPinAllWithName(name, [obj1, obj2, ...]);\n     * </pre>\n     *\n     * @param {string} name Name of Pin.\n     * @param {Array} objects A list of <code>Parse.Object</code>.\n     * @returns {Promise} A promise that is fulfilled when the unPin completes.\n     * @static\n     */\n\n  }, {\n    key: \"unPinAllWithName\",\n    value: function (name\n    /*: string*/\n    , objects\n    /*: Array<ParseObject>*/\n    )\n    /*: Promise<void>*/\n    {\n      var localDatastore = _CoreManager.default.getLocalDatastore();\n\n      if (!localDatastore.isEnabled) {\n        return _promise.default.reject('Parse.enableLocalDatastore() must be called first');\n      }\n\n      return localDatastore._handleUnPinAllWithName(name, objects);\n    }\n    /**\n     * Asynchronously removes all objects in the local datastore using a default pin name: _default.\n     *\n     * <pre>\n     * await Parse.Object.unPinAllObjects();\n     * </pre>\n     *\n     * @returns {Promise} A promise that is fulfilled when the unPin completes.\n     * @static\n     */\n\n  }, {\n    key: \"unPinAllObjects\",\n    value: function ()\n    /*: Promise<void>*/\n    {\n      var localDatastore = _CoreManager.default.getLocalDatastore();\n\n      if (!localDatastore.isEnabled) {\n        return _promise.default.reject('Parse.enableLocalDatastore() must be called first');\n      }\n\n      return localDatastore.unPinWithName(_LocalDatastoreUtils.DEFAULT_PIN);\n    }\n    /**\n     * Asynchronously removes all objects with the specified pin name.\n     * Deletes the pin name also.\n     *\n     * <pre>\n     * await Parse.Object.unPinAllObjectsWithName(name);\n     * </pre>\n     *\n     * @param {string} name Name of Pin.\n     * @returns {Promise} A promise that is fulfilled when the unPin completes.\n     * @static\n     */\n\n  }, {\n    key: \"unPinAllObjectsWithName\",\n    value: function (name\n    /*: string*/\n    )\n    /*: Promise<void>*/\n    {\n      var localDatastore = _CoreManager.default.getLocalDatastore();\n\n      if (!localDatastore.isEnabled) {\n        return _promise.default.reject('Parse.enableLocalDatastore() must be called first');\n      }\n\n      return localDatastore.unPinWithName(_LocalDatastoreUtils.PIN_PREFIX + name);\n    }\n  }]);\n  return ParseObject;\n}();\n\nvar DefaultController = {\n  fetch: function (target\n  /*: ParseObject | Array<ParseObject>*/\n  , forceFetch\n  /*: boolean*/\n  , options\n  /*: RequestOptions*/\n  )\n  /*: Promise<Array<void> | ParseObject>*/\n  {\n    var localDatastore = _CoreManager.default.getLocalDatastore();\n\n    if ((0, _isArray.default)(target)) {\n      if (target.length < 1) {\n        return _promise.default.resolve([]);\n      }\n\n      var objs = [];\n      var ids = [];\n      var className = null;\n      var results = [];\n      var error = null;\n      (0, _forEach.default)(target).call(target, function (el) {\n        if (error) {\n          return;\n        }\n\n        if (!className) {\n          className = el.className;\n        }\n\n        if (className !== el.className) {\n          error = new _ParseError.default(_ParseError.default.INVALID_CLASS_NAME, 'All objects should be of the same class');\n        }\n\n        if (!el.id) {\n          error = new _ParseError.default(_ParseError.default.MISSING_OBJECT_ID, 'All objects must have an ID');\n        }\n\n        if (forceFetch || !el.isDataAvailable()) {\n          ids.push(el.id);\n          objs.push(el);\n        }\n\n        results.push(el);\n      });\n\n      if (error) {\n        return _promise.default.reject(error);\n      }\n\n      var query = new _ParseQuery.default(className);\n      query.containedIn('objectId', ids);\n\n      if (options && options.include) {\n        query.include(options.include);\n      }\n\n      query._limit = ids.length;\n      return (0, _find.default)(query).call(query, options).then( /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(objects) {\n          var idMap, i, obj, _i, _obj, id, _iterator2, _step2, object;\n\n          return _regenerator.default.wrap(function (_context9) {\n            while (1) {\n              switch (_context9.prev = _context9.next) {\n                case 0:\n                  idMap = {};\n                  (0, _forEach.default)(objects).call(objects, function (o) {\n                    idMap[o.id] = o;\n                  });\n                  i = 0;\n\n                case 3:\n                  if (!(i < objs.length)) {\n                    _context9.next = 11;\n                    break;\n                  }\n\n                  obj = objs[i];\n\n                  if (!(!obj || !obj.id || !idMap[obj.id])) {\n                    _context9.next = 8;\n                    break;\n                  }\n\n                  if (!forceFetch) {\n                    _context9.next = 8;\n                    break;\n                  }\n\n                  return _context9.abrupt(\"return\", _promise.default.reject(new _ParseError.default(_ParseError.default.OBJECT_NOT_FOUND, 'All objects must exist on the server.')));\n\n                case 8:\n                  i++;\n                  _context9.next = 3;\n                  break;\n\n                case 11:\n                  if (!singleInstance) {\n                    // If single instance objects are disabled, we need to replace the\n                    for (_i = 0; _i < results.length; _i++) {\n                      _obj = results[_i];\n\n                      if (_obj && _obj.id && idMap[_obj.id]) {\n                        id = _obj.id;\n\n                        _obj._finishFetch(idMap[id].toJSON());\n\n                        results[_i] = idMap[id];\n                      }\n                    }\n                  }\n\n                  _iterator2 = _createForOfIteratorHelper(results);\n                  _context9.prev = 13;\n\n                  _iterator2.s();\n\n                case 15:\n                  if ((_step2 = _iterator2.n()).done) {\n                    _context9.next = 21;\n                    break;\n                  }\n\n                  object = _step2.value;\n                  _context9.next = 19;\n                  return localDatastore._updateObjectIfPinned(object);\n\n                case 19:\n                  _context9.next = 15;\n                  break;\n\n                case 21:\n                  _context9.next = 26;\n                  break;\n\n                case 23:\n                  _context9.prev = 23;\n                  _context9.t0 = _context9[\"catch\"](13);\n\n                  _iterator2.e(_context9.t0);\n\n                case 26:\n                  _context9.prev = 26;\n\n                  _iterator2.f();\n\n                  return _context9.finish(26);\n\n                case 29:\n                  return _context9.abrupt(\"return\", _promise.default.resolve(results));\n\n                case 30:\n                case \"end\":\n                  return _context9.stop();\n              }\n            }\n          }, _callee6, null, [[13, 23, 26, 29]]);\n        }));\n\n        return function () {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    } else if (target instanceof ParseObject) {\n      if (!target.id) {\n        return _promise.default.reject(new _ParseError.default(_ParseError.default.MISSING_OBJECT_ID, 'Object does not have an ID'));\n      }\n\n      var RESTController = _CoreManager.default.getRESTController();\n\n      var params = {};\n\n      if (options && options.include) {\n        params.include = options.include.join();\n      }\n\n      return RESTController.request('GET', 'classes/' + target.className + '/' + target._getId(), params, options).then( /*#__PURE__*/function () {\n        var _ref2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7(response) {\n          return _regenerator.default.wrap(function (_context10) {\n            while (1) {\n              switch (_context10.prev = _context10.next) {\n                case 0:\n                  target._clearPendingOps();\n\n                  target._clearServerData();\n\n                  target._finishFetch(response);\n\n                  _context10.next = 5;\n                  return localDatastore._updateObjectIfPinned(target);\n\n                case 5:\n                  return _context10.abrupt(\"return\", target);\n\n                case 6:\n                case \"end\":\n                  return _context10.stop();\n              }\n            }\n          }, _callee7);\n        }));\n\n        return function () {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    }\n\n    return _promise.default.resolve();\n  },\n  destroy: function (target\n  /*: ParseObject | Array<ParseObject>*/\n  , options\n  /*: RequestOptions*/\n  )\n  /*: Promise<Array<void> | ParseObject>*/\n  {\n    return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee10() {\n      var batchSize, localDatastore, RESTController, batches, deleteCompleted, errors;\n      return _regenerator.default.wrap(function (_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              batchSize = options && options.batchSize ? options.batchSize : _CoreManager.default.get('REQUEST_BATCH_SIZE');\n              localDatastore = _CoreManager.default.getLocalDatastore();\n              RESTController = _CoreManager.default.getRESTController();\n\n              if (!(0, _isArray.default)(target)) {\n                _context13.next = 15;\n                break;\n              }\n\n              if (!(target.length < 1)) {\n                _context13.next = 6;\n                break;\n              }\n\n              return _context13.abrupt(\"return\", _promise.default.resolve([]));\n\n            case 6:\n              batches = [[]];\n              (0, _forEach.default)(target).call(target, function (obj) {\n                if (!obj.id) {\n                  return;\n                }\n\n                batches[batches.length - 1].push(obj);\n\n                if (batches[batches.length - 1].length >= batchSize) {\n                  batches.push([]);\n                }\n              });\n\n              if (batches[batches.length - 1].length === 0) {\n                // If the last batch is empty, remove it\n                batches.pop();\n              }\n\n              deleteCompleted = _promise.default.resolve();\n              errors = [];\n              (0, _forEach.default)(batches).call(batches, function (batch) {\n                deleteCompleted = deleteCompleted.then(function () {\n                  return RESTController.request('POST', 'batch', {\n                    requests: (0, _map.default)(batch).call(batch, function (obj) {\n                      return {\n                        method: 'DELETE',\n                        path: getServerUrlPath() + 'classes/' + obj.className + '/' + obj._getId(),\n                        body: {}\n                      };\n                    })\n                  }, options).then(function (results) {\n                    for (var i = 0; i < results.length; i++) {\n                      if (results[i] && results[i].hasOwnProperty('error')) {\n                        var err = new _ParseError.default(results[i].error.code, results[i].error.error);\n                        err.object = batch[i];\n                        errors.push(err);\n                      }\n                    }\n                  });\n                });\n              });\n              return _context13.abrupt(\"return\", deleteCompleted.then( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee8() {\n                var aggregate, _iterator3, _step3, object;\n\n                return _regenerator.default.wrap(function (_context11) {\n                  while (1) {\n                    switch (_context11.prev = _context11.next) {\n                      case 0:\n                        if (!errors.length) {\n                          _context11.next = 4;\n                          break;\n                        }\n\n                        aggregate = new _ParseError.default(_ParseError.default.AGGREGATE_ERROR);\n                        aggregate.errors = errors;\n                        return _context11.abrupt(\"return\", _promise.default.reject(aggregate));\n\n                      case 4:\n                        _iterator3 = _createForOfIteratorHelper(target);\n                        _context11.prev = 5;\n\n                        _iterator3.s();\n\n                      case 7:\n                        if ((_step3 = _iterator3.n()).done) {\n                          _context11.next = 13;\n                          break;\n                        }\n\n                        object = _step3.value;\n                        _context11.next = 11;\n                        return localDatastore._destroyObjectIfPinned(object);\n\n                      case 11:\n                        _context11.next = 7;\n                        break;\n\n                      case 13:\n                        _context11.next = 18;\n                        break;\n\n                      case 15:\n                        _context11.prev = 15;\n                        _context11.t0 = _context11[\"catch\"](5);\n\n                        _iterator3.e(_context11.t0);\n\n                      case 18:\n                        _context11.prev = 18;\n\n                        _iterator3.f();\n\n                        return _context11.finish(18);\n\n                      case 21:\n                        return _context11.abrupt(\"return\", _promise.default.resolve(target));\n\n                      case 22:\n                      case \"end\":\n                        return _context11.stop();\n                    }\n                  }\n                }, _callee8, null, [[5, 15, 18, 21]]);\n              }))));\n\n            case 15:\n              if (!(target instanceof ParseObject)) {\n                _context13.next = 17;\n                break;\n              }\n\n              return _context13.abrupt(\"return\", RESTController.request('DELETE', 'classes/' + target.className + '/' + target._getId(), {}, options).then( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee9() {\n                return _regenerator.default.wrap(function (_context12) {\n                  while (1) {\n                    switch (_context12.prev = _context12.next) {\n                      case 0:\n                        _context12.next = 2;\n                        return localDatastore._destroyObjectIfPinned(target);\n\n                      case 2:\n                        return _context12.abrupt(\"return\", _promise.default.resolve(target));\n\n                      case 3:\n                      case \"end\":\n                        return _context12.stop();\n                    }\n                  }\n                }, _callee9);\n              }))));\n\n            case 17:\n              return _context13.abrupt(\"return\", _promise.default.resolve(target));\n\n            case 18:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee10);\n    }))();\n  },\n  save: function (target\n  /*: ParseObject | Array<ParseObject | ParseFile>*/\n  , options\n  /*: RequestOptions*/\n  ) {\n    var batchSize = options && options.batchSize ? options.batchSize : _CoreManager.default.get('REQUEST_BATCH_SIZE');\n\n    var localDatastore = _CoreManager.default.getLocalDatastore();\n\n    var mapIdForPin = {};\n\n    var RESTController = _CoreManager.default.getRESTController();\n\n    var stateController = _CoreManager.default.getObjectStateController();\n\n    var allowCustomObjectId = _CoreManager.default.get('ALLOW_CUSTOM_OBJECT_ID');\n\n    options = options || {};\n    options.returnStatus = options.returnStatus || true;\n\n    if ((0, _isArray.default)(target)) {\n      if (target.length < 1) {\n        return _promise.default.resolve([]);\n      }\n\n      var unsaved = (0, _concat.default)(target).call(target);\n\n      for (var i = 0; i < target.length; i++) {\n        if (target[i] instanceof ParseObject) {\n          unsaved = (0, _concat.default)(unsaved).call(unsaved, (0, _unsavedChildren.default)(target[i], true));\n        }\n      }\n\n      unsaved = (0, _unique.default)(unsaved);\n      var filesSaved\n      /*: Array<ParseFile>*/\n      = [];\n      var pending\n      /*: Array<ParseObject>*/\n      = [];\n      (0, _forEach.default)(unsaved).call(unsaved, function (el) {\n        if (el instanceof _ParseFile.default) {\n          filesSaved.push(el.save(options));\n        } else if (el instanceof ParseObject) {\n          if (allowCustomObjectId && !el.id) {\n            throw new _ParseError.default(_ParseError.default.MISSING_OBJECT_ID, 'objectId must not be empty, null or undefined');\n          }\n\n          pending.push(el);\n        }\n      });\n      return _promise.default.all(filesSaved).then(function () {\n        var objectError = null;\n        return (0, _promiseUtils.continueWhile)(function () {\n          return pending.length > 0;\n        }, function () {\n          var batch = [];\n          var nextPending = [];\n          (0, _forEach.default)(pending).call(pending, function (el) {\n            if (batch.length < batchSize && (0, _canBeSerialized.default)(el)) {\n              batch.push(el);\n            } else {\n              nextPending.push(el);\n            }\n          });\n          pending = nextPending;\n\n          if (batch.length < 1) {\n            return _promise.default.reject(new _ParseError.default(_ParseError.default.OTHER_CAUSE, 'Tried to save a batch with a cycle.'));\n          } // Queue up tasks for each object in the batch.\n          // When every task is ready, the API request will execute\n\n\n          var batchReturned = new _promiseUtils.resolvingPromise();\n          var batchReady = [];\n          var batchTasks = [];\n          (0, _forEach.default)(batch).call(batch, function (obj, index) {\n            var ready = new _promiseUtils.resolvingPromise();\n            batchReady.push(ready);\n            stateController.pushPendingState(obj._getStateIdentifier());\n            batchTasks.push(stateController.enqueueTask(obj._getStateIdentifier(), function () {\n              ready.resolve();\n              return batchReturned.then(function (responses) {\n                if (responses[index].hasOwnProperty('success')) {\n                  var objectId = responses[index].success.objectId;\n                  var status = responses[index]._status;\n                  delete responses[index]._status;\n                  mapIdForPin[objectId] = obj._localId;\n\n                  obj._handleSaveResponse(responses[index].success, status);\n                } else {\n                  if (!objectError && responses[index].hasOwnProperty('error')) {\n                    var serverError = responses[index].error;\n                    objectError = new _ParseError.default(serverError.code, serverError.error); // Cancel the rest of the save\n\n                    pending = [];\n                  }\n\n                  obj._handleSaveError();\n                }\n              });\n            }));\n          });\n          (0, _promiseUtils.when)(batchReady).then(function () {\n            // Kick off the batch request\n            return RESTController.request('POST', 'batch', {\n              requests: (0, _map.default)(batch).call(batch, function (obj) {\n                var params = obj._getSaveParams();\n\n                params.path = getServerUrlPath() + params.path;\n                return params;\n              })\n            }, options);\n          }).then(batchReturned.resolve, function (error) {\n            batchReturned.reject(new _ParseError.default(_ParseError.default.INCORRECT_TYPE, error.message));\n          });\n          return (0, _promiseUtils.when)(batchTasks);\n        }).then( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee11() {\n          var _iterator4, _step4, object;\n\n          return _regenerator.default.wrap(function (_context14) {\n            while (1) {\n              switch (_context14.prev = _context14.next) {\n                case 0:\n                  if (!objectError) {\n                    _context14.next = 2;\n                    break;\n                  }\n\n                  return _context14.abrupt(\"return\", _promise.default.reject(objectError));\n\n                case 2:\n                  _iterator4 = _createForOfIteratorHelper(target);\n                  _context14.prev = 3;\n\n                  _iterator4.s();\n\n                case 5:\n                  if ((_step4 = _iterator4.n()).done) {\n                    _context14.next = 13;\n                    break;\n                  }\n\n                  object = _step4.value;\n                  _context14.next = 9;\n                  return localDatastore._updateLocalIdForObject(mapIdForPin[object.id], object);\n\n                case 9:\n                  _context14.next = 11;\n                  return localDatastore._updateObjectIfPinned(object);\n\n                case 11:\n                  _context14.next = 5;\n                  break;\n\n                case 13:\n                  _context14.next = 18;\n                  break;\n\n                case 15:\n                  _context14.prev = 15;\n                  _context14.t0 = _context14[\"catch\"](3);\n\n                  _iterator4.e(_context14.t0);\n\n                case 18:\n                  _context14.prev = 18;\n\n                  _iterator4.f();\n\n                  return _context14.finish(18);\n\n                case 21:\n                  return _context14.abrupt(\"return\", _promise.default.resolve(target));\n\n                case 22:\n                case \"end\":\n                  return _context14.stop();\n              }\n            }\n          }, _callee11, null, [[3, 15, 18, 21]]);\n        })));\n      });\n    } else if (target instanceof ParseObject) {\n      if (allowCustomObjectId && !target.id) {\n        throw new _ParseError.default(_ParseError.default.MISSING_OBJECT_ID, 'objectId must not be empty, null or undefined');\n      } // generate _localId in case if cascadeSave=false\n\n\n      target._getId();\n\n      var localId = target._localId; // copying target lets Flow guarantee the pointer isn't modified elsewhere\n\n      var targetCopy = target;\n\n      var task = function () {\n        var params = targetCopy._getSaveParams();\n\n        return RESTController.request(params.method, params.path, params.body, options).then(function (response) {\n          var status = response._status;\n          delete response._status;\n\n          targetCopy._handleSaveResponse(response, status);\n        }, function (error) {\n          targetCopy._handleSaveError();\n\n          return _promise.default.reject(error);\n        });\n      };\n\n      stateController.pushPendingState(target._getStateIdentifier());\n      return stateController.enqueueTask(target._getStateIdentifier(), task).then( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee12() {\n        return _regenerator.default.wrap(function (_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                _context15.next = 2;\n                return localDatastore._updateLocalIdForObject(localId, target);\n\n              case 2:\n                _context15.next = 4;\n                return localDatastore._updateObjectIfPinned(target);\n\n              case 4:\n                return _context15.abrupt(\"return\", target);\n\n              case 5:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee12);\n      })), function (error) {\n        return _promise.default.reject(error);\n      });\n    }\n\n    return _promise.default.resolve();\n  }\n};\n\n_CoreManager.default.setObjectController(DefaultController);\n\nvar _default = ParseObject;\nexports.default = _default;","map":{"version":3,"sources":["/home/phy/portfolio/node_modules/parse/lib/browser/ParseObject.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","_getIterator","_Array$isArray2","_getIteratorMethod","_Symbol","_Array$from","_sliceInstanceProperty","_Object$defineProperty2","_Object$defineProperties","_Object$getOwnPropertyDescriptors","_forEachInstanceProperty2","_Object$getOwnPropertyDescriptor","_filterInstanceProperty","_Object$getOwnPropertySymbols","_Object$keys2","exports","value","default","_map","_find","_defineProperty2","_create","_promise","_isArray","_regenerator","_asyncToGenerator2","_concat","_getPrototypeOf","_includes","_stringify","_forEach","_keys","_freeze","_typeof2","_classCallCheck2","_createClass2","_defineProperty3","_indexOf","_CoreManager","_canBeSerialized","_decode","_encode","_escape2","_EventuallyQueue","_ParseACL","_parseDate","_ParseError","_ParseFile","_promiseUtils","_LocalDatastoreUtils","_ParseOp","_ParseQuery","_ParseRelation","SingleInstanceStateController","_unique","UniqueInstanceStateController","_unsavedChildren","_createForOfIteratorHelper","o","allowArrayLike","it","_unsupportedIterableToArray","length","i","F","s","n","done","e","_e","f","TypeError","normalCompletion","didErr","err","step","next","_e2","return","minLen","_context18","_arrayLikeToArray","Object","prototype","toString","call","constructor","name","test","arr","len","arr2","Array","ownKeys","object","enumerableOnly","keys","symbols","sym","enumerable","push","apply","_objectSpread","target","arguments","source","_context16","key","_context17","uuidv4","classMap","objectCount","singleInstance","get","setObjectStateController","getServerUrlPath","serverUrl","url","replace","substr","ParseObject","className","attributes","options","initialize","toSet","_objCount","_attr","set","Error","stateController","getObjectStateController","estimateAttributes","_getStateIdentifier","_getServerData","createdAt","updatedAt","id","_localId","localId","_getId","getServerData","serverData","unset","_attr2","undefined","setServerData","getPendingOps","keysToClear","pending","_getPendingOps","latest","objectCache","getObjectCache","dirty","_attr3","val","json","stringified","seen","offline","toJSON","__type","dirtyObjects","_getDirtyObjectAttributes","attr","isDotNotation","field","fieldName","split","SetOp","method","body","_getSaveJSON","path","objectId","initializeState","decoded","_attr4","_ensureParentAndKey","commitServerChanges","existed","state","getState","serverId","oldState","removeState","response","status","changes","popPendingState","RelationOp","applyTo","UnsetOp","_migrateId","_setExisted","mergeFirstPendingState","seenEntry","attrs","_attr5","_attr6","other","pendingOps","hasOwnProperty","_attr7","_attr8","newOps","readonly","readOnlyAttributes","k","Op","__op","opFromJSON","relation","targetClassName","currentAttributes","newValues","_attr9","ignoreValidation","validation","validate","error","last","_attr10","nextOp","mergeWith","setPendingOp","amount","IncrementOp","item","AddOp","items","AddUniqueOp","RemoveOp","clone","copy","a","duplicateState","_exists","mark","_callee","query","wrap","_context","prev","abrupt","t0","code","OBJECT_NOT_FOUND","stop","ACL","OTHER_CAUSE","_key","INVALID_KEY_NAME","acl","keysToRevert","_len","_key2","_iterator","_step","_key3","_clearPendingOps","erasable","_attr11","fetchOptions","useMasterKey","sessionToken","context","include","_context2","_context3","controller","getObjectController","fetch","_saveEventually","_callee2","_context4","save","message","poll","arg1","arg2","arg3","_this","reject","saveOptions","installationId","unsaved","cascadeSave","then","_destroyEventually","_callee3","_context5","destroy","destroyOptions","resolve","pinAllWithName","DEFAULT_PIN","unPinAllWithName","_isPinned","_callee4","localDatastore","objectKey","pin","_context6","getLocalDatastore","isEnabled","getKeyForObject","fromPinWithName","sent","_fetchFromLocalDatastore","_callee5","pinned","result","_context7","_serializeObject","fromJSON","_finishFetch","clearAllState","list","queryOptions","handleIncludeOptions","fetchAll","fetchAllIfNeeded","_context8","batchSize","obj","override","otherAttributes","_attr12","preserved","_preserveFieldsOnFetch","_clearServerData","protoProps","classProps","extend","adjustedClassName","parentProto","__super__","ParseObjectSubclass","writable","configurable","prop","_prop","createWithoutData","objects","_handlePinAllWithName","_handleUnPinAllWithName","unPinWithName","PIN_PREFIX","DefaultController","forceFetch","objs","ids","results","el","INVALID_CLASS_NAME","MISSING_OBJECT_ID","isDataAvailable","containedIn","_limit","_ref","_callee6","idMap","_i","_obj","_iterator2","_step2","_context9","_updateObjectIfPinned","finish","RESTController","getRESTController","params","join","request","_ref2","_callee7","_context10","_callee10","batches","deleteCompleted","errors","_context13","pop","batch","requests","_callee8","aggregate","_iterator3","_step3","_context11","AGGREGATE_ERROR","_destroyObjectIfPinned","_callee9","_context12","mapIdForPin","allowCustomObjectId","returnStatus","filesSaved","all","objectError","continueWhile","nextPending","batchReturned","resolvingPromise","batchReady","batchTasks","index","ready","pushPendingState","enqueueTask","responses","success","_status","_handleSaveResponse","serverError","_handleSaveError","when","_getSaveParams","INCORRECT_TYPE","_callee11","_iterator4","_step4","_context14","_updateLocalIdForObject","targetCopy","task","_callee12","_context15","setObjectController","_default"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime-corejs3/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _getIterator = require(\"@babel/runtime-corejs3/core-js/get-iterator\");\n\nvar _Array$isArray2 = require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\");\n\nvar _getIteratorMethod = require(\"@babel/runtime-corejs3/core-js/get-iterator-method\");\n\nvar _Symbol = require(\"@babel/runtime-corejs3/core-js-stable/symbol\");\n\nvar _Array$from = require(\"@babel/runtime-corejs3/core-js-stable/array/from\");\n\nvar _sliceInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/slice\");\n\nvar _Object$defineProperty2 = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\nvar _Object$defineProperties = require(\"@babel/runtime-corejs3/core-js-stable/object/define-properties\");\n\nvar _Object$getOwnPropertyDescriptors = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptors\");\n\nvar _forEachInstanceProperty2 = require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\");\n\nvar _Object$getOwnPropertyDescriptor = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-descriptor\");\n\nvar _filterInstanceProperty = require(\"@babel/runtime-corejs3/core-js-stable/instance/filter\");\n\nvar _Object$getOwnPropertySymbols = require(\"@babel/runtime-corejs3/core-js-stable/object/get-own-property-symbols\");\n\nvar _Object$keys2 = require(\"@babel/runtime-corejs3/core-js-stable/object/keys\");\n\n_Object$defineProperty2(exports, \"__esModule\", {\n  value: true\n});\n\nexports.default = void 0;\n\nvar _map = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/map\"));\n\nvar _find = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/find\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\"));\n\nvar _create = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/create\"));\n\nvar _promise = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/promise\"));\n\nvar _isArray = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/array/is-array\"));\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime-corejs3/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/asyncToGenerator\"));\n\nvar _concat = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/concat\"));\n\nvar _getPrototypeOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/get-prototype-of\"));\n\nvar _includes = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/includes\"));\n\nvar _stringify = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/json/stringify\"));\n\nvar _forEach = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/for-each\"));\n\nvar _keys = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/keys\"));\n\nvar _freeze = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/object/freeze\"));\n\nvar _typeof2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/typeof\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _defineProperty3 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _indexOf = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/instance/index-of\"));\n\nvar _CoreManager = _interopRequireDefault(require(\"./CoreManager\"));\n\nvar _canBeSerialized = _interopRequireDefault(require(\"./canBeSerialized\"));\n\nvar _decode = _interopRequireDefault(require(\"./decode\"));\n\nvar _encode = _interopRequireDefault(require(\"./encode\"));\n\nvar _escape2 = _interopRequireDefault(require(\"./escape\"));\n\nvar _EventuallyQueue = _interopRequireDefault(require(\"./EventuallyQueue\"));\n\nvar _ParseACL = _interopRequireDefault(require(\"./ParseACL\"));\n\nvar _parseDate = _interopRequireDefault(require(\"./parseDate\"));\n\nvar _ParseError = _interopRequireDefault(require(\"./ParseError\"));\n\nvar _ParseFile = _interopRequireDefault(require(\"./ParseFile\"));\n\nvar _promiseUtils = require(\"./promiseUtils\");\n\nvar _LocalDatastoreUtils = require(\"./LocalDatastoreUtils\");\n\nvar _ParseOp = require(\"./ParseOp\");\n\nvar _ParseQuery = _interopRequireDefault(require(\"./ParseQuery\"));\n\nvar _ParseRelation = _interopRequireDefault(require(\"./ParseRelation\"));\n\nvar SingleInstanceStateController = _interopRequireWildcard(require(\"./SingleInstanceStateController\"));\n\nvar _unique = _interopRequireDefault(require(\"./unique\"));\n\nvar UniqueInstanceStateController = _interopRequireWildcard(require(\"./UniqueInstanceStateController\"));\n\nvar _unsavedChildren = _interopRequireDefault(require(\"./unsavedChildren\"));\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof _Symbol === \"undefined\" || _getIteratorMethod(o) == null) {\n    if (_Array$isArray2(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function () {};\n\n      return {\n        s: F,\n        n: function () {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function (_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function () {\n      it = _getIterator(o);\n    },\n    n: function () {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function (_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function () {\n      try {\n        if (!normalCompletion && it.return != null) it.return();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  var _context18;\n\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n\n  var n = _sliceInstanceProperty(_context18 = Object.prototype.toString.call(o)).call(_context18, 8, -1);\n\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return _Array$from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = _Object$keys2(object);\n\n  if (_Object$getOwnPropertySymbols) {\n    var symbols = _Object$getOwnPropertySymbols(object);\n\n    if (enumerableOnly) symbols = _filterInstanceProperty(symbols).call(symbols, function (sym) {\n      return _Object$getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      var _context16;\n\n      _forEachInstanceProperty2(_context16 = ownKeys(Object(source), true)).call(_context16, function (key) {\n        (0, _defineProperty3.default)(target, key, source[key]);\n      });\n    } else if (_Object$getOwnPropertyDescriptors) {\n      _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source));\n    } else {\n      var _context17;\n\n      _forEachInstanceProperty2(_context17 = ownKeys(Object(source))).call(_context17, function (key) {\n        _Object$defineProperty2(target, key, _Object$getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar uuidv4 = require('./uuid');\n/*:: export type Pointer = {\n  __type: string,\n  className: string,\n  objectId: string,\n};*/\n\n/*:: type SaveParams = {\n  method: string,\n  path: string,\n  body: AttributeMap,\n};*/\n\n/*:: export type SaveOptions = FullOptions & {\n  cascadeSave?: boolean,\n  context?: AttributeMap,\n};*/\n// Mapping of class names to constructors, so we can populate objects from the\n// server with appropriate subclasses of ParseObject\n\n\nvar classMap = {}; // Global counter for generating unique Ids for non-single-instance objects\n\nvar objectCount = 0; // On web clients, objects are single-instance: any two objects with the same Id\n// will have the same attributes. However, this may be dangerous default\n// behavior in a server scenario\n\nvar singleInstance = !_CoreManager.default.get('IS_NODE');\n\nif (singleInstance) {\n  _CoreManager.default.setObjectStateController(SingleInstanceStateController);\n} else {\n  _CoreManager.default.setObjectStateController(UniqueInstanceStateController);\n}\n\nfunction getServerUrlPath() {\n  var serverUrl = _CoreManager.default.get('SERVER_URL');\n\n  if (serverUrl[serverUrl.length - 1] !== '/') {\n    serverUrl += '/';\n  }\n\n  var url = serverUrl.replace(/https?:\\/\\//, '');\n  return url.substr((0, _indexOf.default)(url).call(url, '/'));\n}\n/**\n * Creates a new model with defined attributes.\n *\n * <p>You won't normally call this method directly.  It is recommended that\n * you use a subclass of <code>Parse.Object</code> instead, created by calling\n * <code>extend</code>.</p>\n *\n * <p>However, if you don't want to use a subclass, or aren't sure which\n * subclass is appropriate, you can use this form:<pre>\n *     var object = new Parse.Object(\"ClassName\");\n * </pre>\n * That is basically equivalent to:<pre>\n *     var MyClass = Parse.Object.extend(\"ClassName\");\n *     var object = new MyClass();\n * </pre></p>\n *\n * @alias Parse.Object\n */\n\n\nvar ParseObject = /*#__PURE__*/function () {\n  /**\n   * @param {string} className The class name for the object\n   * @param {object} attributes The initial set of data to store in the object.\n   * @param {object} options The options for this object instance.\n   */\n  function ParseObject(className\n  /*: ?string | { className: string, [attr: string]: mixed }*/\n  , attributes\n  /*:: ?: { [attr: string]: mixed }*/\n  , options\n  /*:: ?: { ignoreValidation: boolean }*/\n  ) {\n    (0, _classCallCheck2.default)(this, ParseObject);\n    (0, _defineProperty3.default)(this, \"id\", void 0);\n    (0, _defineProperty3.default)(this, \"_localId\", void 0);\n    (0, _defineProperty3.default)(this, \"_objCount\", void 0);\n    (0, _defineProperty3.default)(this, \"className\", void 0); // Enable legacy initializers\n\n    if (typeof this.initialize === 'function') {\n      this.initialize.apply(this, arguments);\n    }\n\n    var toSet = null;\n    this._objCount = objectCount++;\n\n    if (typeof className === 'string') {\n      this.className = className;\n\n      if (attributes && (0, _typeof2.default)(attributes) === 'object') {\n        toSet = attributes;\n      }\n    } else if (className && (0, _typeof2.default)(className) === 'object') {\n      this.className = className.className;\n      toSet = {};\n\n      for (var _attr in className) {\n        if (_attr !== 'className') {\n          toSet[_attr] = className[_attr];\n        }\n      }\n\n      if (attributes && (0, _typeof2.default)(attributes) === 'object') {\n        options = attributes;\n      }\n    }\n\n    if (toSet && !this.set(toSet, options)) {\n      throw new Error(\"Can't create an invalid Parse Object\");\n    }\n  }\n  /**\n   * The ID of this object, unique within its class.\n   *\n   * @property {string} id\n   */\n\n\n  (0, _createClass2.default)(ParseObject, [{\n    key: \"attributes\",\n    get:\n    /** Prototype getters / setters **/\n    function ()\n    /*: AttributeMap*/\n    {\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      return (0, _freeze.default)(stateController.estimateAttributes(this._getStateIdentifier()));\n    }\n    /**\n     * The first time this object was saved on the server.\n     *\n     * @property {Date} createdAt\n     * @returns {Date}\n     */\n\n  }, {\n    key: \"createdAt\",\n    get: function ()\n    /*: ?Date*/\n    {\n      return this._getServerData().createdAt;\n    }\n    /**\n     * The last time this object was updated on the server.\n     *\n     * @property {Date} updatedAt\n     * @returns {Date}\n     */\n\n  }, {\n    key: \"updatedAt\",\n    get: function ()\n    /*: ?Date*/\n    {\n      return this._getServerData().updatedAt;\n    }\n    /** Private methods **/\n\n    /**\n     * Returns a local or server Id used uniquely identify this object\n     *\n     * @returns {string}\n     */\n\n  }, {\n    key: \"_getId\",\n    value: function ()\n    /*: string*/\n    {\n      if (typeof this.id === 'string') {\n        return this.id;\n      }\n\n      if (typeof this._localId === 'string') {\n        return this._localId;\n      }\n\n      var localId = 'local' + uuidv4();\n      this._localId = localId;\n      return localId;\n    }\n    /**\n     * Returns a unique identifier used to pull data from the State Controller.\n     *\n     * @returns {Parse.Object|object}\n     */\n\n  }, {\n    key: \"_getStateIdentifier\",\n    value: function ()\n    /*: ParseObject | { id: string, className: string }*/\n    {\n      if (singleInstance) {\n        var id = this.id;\n\n        if (!id) {\n          id = this._getId();\n        }\n\n        return {\n          id: id,\n          className: this.className\n        };\n      } else {\n        return this;\n      }\n    }\n  }, {\n    key: \"_getServerData\",\n    value: function ()\n    /*: AttributeMap*/\n    {\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      return stateController.getServerData(this._getStateIdentifier());\n    }\n  }, {\n    key: \"_clearServerData\",\n    value: function () {\n      var serverData = this._getServerData();\n\n      var unset = {};\n\n      for (var _attr2 in serverData) {\n        unset[_attr2] = undefined;\n      }\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      stateController.setServerData(this._getStateIdentifier(), unset);\n    }\n  }, {\n    key: \"_getPendingOps\",\n    value: function ()\n    /*: Array<OpsMap>*/\n    {\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      return stateController.getPendingOps(this._getStateIdentifier());\n    }\n    /**\n     * @param {Array<string>} [keysToClear] - if specified, only ops matching\n     * these fields will be cleared\n     */\n\n  }, {\n    key: \"_clearPendingOps\",\n    value: function (keysToClear\n    /*:: ?: Array<string>*/\n    ) {\n      var pending = this._getPendingOps();\n\n      var latest = pending[pending.length - 1];\n      var keys = keysToClear || (0, _keys.default)(latest);\n      (0, _forEach.default)(keys).call(keys, function (key) {\n        delete latest[key];\n      });\n    }\n  }, {\n    key: \"_getDirtyObjectAttributes\",\n    value: function ()\n    /*: AttributeMap*/\n    {\n      var attributes = this.attributes;\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      var objectCache = stateController.getObjectCache(this._getStateIdentifier());\n      var dirty = {};\n\n      for (var _attr3 in attributes) {\n        var val = attributes[_attr3];\n\n        if (val && (0, _typeof2.default)(val) === 'object' && !(val instanceof ParseObject) && !(val instanceof _ParseFile.default) && !(val instanceof _ParseRelation.default)) {\n          // Due to the way browsers construct maps, the key order will not change\n          // unless the object is changed\n          try {\n            var json = (0, _encode.default)(val, false, true);\n            var stringified = (0, _stringify.default)(json);\n\n            if (objectCache[_attr3] !== stringified) {\n              dirty[_attr3] = val;\n            }\n          } catch (e) {\n            // Error occurred, possibly by a nested unsaved pointer in a mutable container\n            // No matter how it happened, it indicates a change in the attribute\n            dirty[_attr3] = val;\n          }\n        }\n      }\n\n      return dirty;\n    }\n  }, {\n    key: \"_toFullJSON\",\n    value: function (seen\n    /*:: ?: Array<any>*/\n    , offline\n    /*:: ?: boolean*/\n    )\n    /*: AttributeMap*/\n    {\n      var json\n      /*: { [key: string]: mixed }*/\n      = this.toJSON(seen, offline);\n      json.__type = 'Object';\n      json.className = this.className;\n      return json;\n    }\n  }, {\n    key: \"_getSaveJSON\",\n    value: function ()\n    /*: AttributeMap*/\n    {\n      var pending = this._getPendingOps();\n\n      var dirtyObjects = this._getDirtyObjectAttributes();\n\n      var json = {};\n\n      for (var attr in dirtyObjects) {\n        var isDotNotation = false;\n\n        for (var i = 0; i < pending.length; i += 1) {\n          for (var field in pending[i]) {\n            // Dot notation operations are handled later\n            if ((0, _includes.default)(field).call(field, '.')) {\n              var fieldName = field.split('.')[0];\n\n              if (fieldName === attr) {\n                isDotNotation = true;\n                break;\n              }\n            }\n          }\n        }\n\n        if (!isDotNotation) {\n          json[attr] = new _ParseOp.SetOp(dirtyObjects[attr]).toJSON();\n        }\n      }\n\n      for (attr in pending[0]) {\n        json[attr] = pending[0][attr].toJSON();\n      }\n\n      return json;\n    }\n  }, {\n    key: \"_getSaveParams\",\n    value: function ()\n    /*: SaveParams*/\n    {\n      var method = this.id ? 'PUT' : 'POST';\n\n      var body = this._getSaveJSON();\n\n      var path = 'classes/' + this.className;\n\n      if (_CoreManager.default.get('ALLOW_CUSTOM_OBJECT_ID')) {\n        if (!this.createdAt) {\n          method = 'POST';\n          body.objectId = this.id;\n        } else {\n          method = 'PUT';\n          path += '/' + this.id;\n        }\n      } else if (this.id) {\n        path += '/' + this.id;\n      } else if (this.className === '_User') {\n        path = 'users';\n      }\n\n      return {\n        method: method,\n        body: body,\n        path: path\n      };\n    }\n  }, {\n    key: \"_finishFetch\",\n    value: function (serverData\n    /*: AttributeMap*/\n    ) {\n      if (!this.id && serverData.objectId) {\n        this.id = serverData.objectId;\n      }\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      stateController.initializeState(this._getStateIdentifier());\n      var decoded = {};\n\n      for (var _attr4 in serverData) {\n        if (_attr4 === 'ACL') {\n          decoded[_attr4] = new _ParseACL.default(serverData[_attr4]);\n        } else if (_attr4 !== 'objectId') {\n          decoded[_attr4] = (0, _decode.default)(serverData[_attr4]);\n\n          if (decoded[_attr4] instanceof _ParseRelation.default) {\n            decoded[_attr4]._ensureParentAndKey(this, _attr4);\n          }\n        }\n      }\n\n      if (decoded.createdAt && typeof decoded.createdAt === 'string') {\n        decoded.createdAt = (0, _parseDate.default)(decoded.createdAt);\n      }\n\n      if (decoded.updatedAt && typeof decoded.updatedAt === 'string') {\n        decoded.updatedAt = (0, _parseDate.default)(decoded.updatedAt);\n      }\n\n      if (!decoded.updatedAt && decoded.createdAt) {\n        decoded.updatedAt = decoded.createdAt;\n      }\n\n      stateController.commitServerChanges(this._getStateIdentifier(), decoded);\n    }\n  }, {\n    key: \"_setExisted\",\n    value: function (existed\n    /*: boolean*/\n    ) {\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      var state = stateController.getState(this._getStateIdentifier());\n\n      if (state) {\n        state.existed = existed;\n      }\n    }\n  }, {\n    key: \"_migrateId\",\n    value: function (serverId\n    /*: string*/\n    ) {\n      if (this._localId && serverId) {\n        if (singleInstance) {\n          var stateController = _CoreManager.default.getObjectStateController();\n\n          var oldState = stateController.removeState(this._getStateIdentifier());\n          this.id = serverId;\n          delete this._localId;\n\n          if (oldState) {\n            stateController.initializeState(this._getStateIdentifier(), oldState);\n          }\n        } else {\n          this.id = serverId;\n          delete this._localId;\n        }\n      }\n    }\n  }, {\n    key: \"_handleSaveResponse\",\n    value: function (response\n    /*: AttributeMap*/\n    , status\n    /*: number*/\n    ) {\n      var changes = {};\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      var pending = stateController.popPendingState(this._getStateIdentifier());\n\n      for (var attr in pending) {\n        if (pending[attr] instanceof _ParseOp.RelationOp) {\n          changes[attr] = pending[attr].applyTo(undefined, this, attr);\n        } else if (!(attr in response)) {\n          // Only SetOps and UnsetOps should not come back with results\n          changes[attr] = pending[attr].applyTo(undefined);\n        }\n      }\n\n      for (attr in response) {\n        if ((attr === 'createdAt' || attr === 'updatedAt') && typeof response[attr] === 'string') {\n          changes[attr] = (0, _parseDate.default)(response[attr]);\n        } else if (attr === 'ACL') {\n          changes[attr] = new _ParseACL.default(response[attr]);\n        } else if (attr !== 'objectId') {\n          var val = (0, _decode.default)(response[attr]);\n\n          if (val && (0, _getPrototypeOf.default)(val) === Object.prototype) {\n            changes[attr] = _objectSpread(_objectSpread({}, this.attributes[attr]), val);\n          } else {\n            changes[attr] = val;\n          }\n\n          if (changes[attr] instanceof _ParseOp.UnsetOp) {\n            changes[attr] = undefined;\n          }\n        }\n      }\n\n      if (changes.createdAt && !changes.updatedAt) {\n        changes.updatedAt = changes.createdAt;\n      }\n\n      this._migrateId(response.objectId);\n\n      if (status !== 201) {\n        this._setExisted(true);\n      }\n\n      stateController.commitServerChanges(this._getStateIdentifier(), changes);\n    }\n  }, {\n    key: \"_handleSaveError\",\n    value: function () {\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      stateController.mergeFirstPendingState(this._getStateIdentifier());\n    }\n  }, {\n    key: \"initialize\",\n    value:\n    /** Public methods **/\n    function () {// NOOP\n    }\n    /**\n     * Returns a JSON version of the object suitable for saving to Parse.\n     *\n     * @param seen\n     * @param offline\n     * @returns {object}\n     */\n\n  }, {\n    key: \"toJSON\",\n    value: function (seen\n    /*: Array<any> | void*/\n    , offline\n    /*:: ?: boolean*/\n    )\n    /*: AttributeMap*/\n    {\n      var seenEntry = this.id ? this.className + ':' + this.id : this;\n      seen = seen || [seenEntry];\n      var json = {};\n      var attrs = this.attributes;\n\n      for (var _attr5 in attrs) {\n        if ((_attr5 === 'createdAt' || _attr5 === 'updatedAt') && attrs[_attr5].toJSON) {\n          json[_attr5] = attrs[_attr5].toJSON();\n        } else {\n          json[_attr5] = (0, _encode.default)(attrs[_attr5], false, false, seen, offline);\n        }\n      }\n\n      var pending = this._getPendingOps();\n\n      for (var _attr6 in pending[0]) {\n        json[_attr6] = pending[0][_attr6].toJSON(offline);\n      }\n\n      if (this.id) {\n        json.objectId = this.id;\n      }\n\n      return json;\n    }\n    /**\n     * Determines whether this ParseObject is equal to another ParseObject\n     *\n     * @param {object} other - An other object ot compare\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"equals\",\n    value: function (other\n    /*: mixed*/\n    )\n    /*: boolean*/\n    {\n      if (this === other) {\n        return true;\n      }\n\n      return other instanceof ParseObject && this.className === other.className && this.id === other.id && typeof this.id !== 'undefined';\n    }\n    /**\n     * Returns true if this object has been modified since its last\n     * save/refresh.  If an attribute is specified, it returns true only if that\n     * particular attribute has been modified since the last save/refresh.\n     *\n     * @param {string} attr An attribute name (optional).\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"dirty\",\n    value: function (attr\n    /*:: ?: string*/\n    )\n    /*: boolean*/\n    {\n      if (!this.id) {\n        return true;\n      }\n\n      var pendingOps = this._getPendingOps();\n\n      var dirtyObjects = this._getDirtyObjectAttributes();\n\n      if (attr) {\n        if (dirtyObjects.hasOwnProperty(attr)) {\n          return true;\n        }\n\n        for (var i = 0; i < pendingOps.length; i++) {\n          if (pendingOps[i].hasOwnProperty(attr)) {\n            return true;\n          }\n        }\n\n        return false;\n      }\n\n      if ((0, _keys.default)(pendingOps[0]).length !== 0) {\n        return true;\n      }\n\n      if ((0, _keys.default)(dirtyObjects).length !== 0) {\n        return true;\n      }\n\n      return false;\n    }\n    /**\n     * Returns an array of keys that have been modified since last save/refresh\n     *\n     * @returns {string[]}\n     */\n\n  }, {\n    key: \"dirtyKeys\",\n    value: function ()\n    /*: Array<string>*/\n    {\n      var pendingOps = this._getPendingOps();\n\n      var keys = {};\n\n      for (var i = 0; i < pendingOps.length; i++) {\n        for (var _attr7 in pendingOps[i]) {\n          keys[_attr7] = true;\n        }\n      }\n\n      var dirtyObjects = this._getDirtyObjectAttributes();\n\n      for (var _attr8 in dirtyObjects) {\n        keys[_attr8] = true;\n      }\n\n      return (0, _keys.default)(keys);\n    }\n    /**\n     * Returns true if the object has been fetched.\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isDataAvailable\",\n    value: function ()\n    /*: boolean*/\n    {\n      var serverData = this._getServerData();\n\n      return !!(0, _keys.default)(serverData).length;\n    }\n    /**\n     * Gets a Pointer referencing this Object.\n     *\n     * @returns {Pointer}\n     */\n\n  }, {\n    key: \"toPointer\",\n    value: function ()\n    /*: Pointer*/\n    {\n      if (!this.id) {\n        throw new Error('Cannot create a pointer to an unsaved ParseObject');\n      }\n\n      return {\n        __type: 'Pointer',\n        className: this.className,\n        objectId: this.id\n      };\n    }\n    /**\n     * Gets a Pointer referencing this Object.\n     *\n     * @returns {Pointer}\n     */\n\n  }, {\n    key: \"toOfflinePointer\",\n    value: function ()\n    /*: Pointer*/\n    {\n      if (!this._localId) {\n        throw new Error('Cannot create a offline pointer to a saved ParseObject');\n      }\n\n      return {\n        __type: 'Object',\n        className: this.className,\n        _localId: this._localId\n      };\n    }\n    /**\n     * Gets the value of an attribute.\n     *\n     * @param {string} attr The string name of an attribute.\n     * @returns {*}\n     */\n\n  }, {\n    key: \"get\",\n    value: function (attr\n    /*: string*/\n    )\n    /*: mixed*/\n    {\n      return this.attributes[attr];\n    }\n    /**\n     * Gets a relation on the given class for the attribute.\n     *\n     * @param {string} attr The attribute to get the relation for.\n     * @returns {Parse.Relation}\n     */\n\n  }, {\n    key: \"relation\",\n    value: function (attr\n    /*: string*/\n    )\n    /*: ParseRelation*/\n    {\n      var value = this.get(attr);\n\n      if (value) {\n        if (!(value instanceof _ParseRelation.default)) {\n          throw new Error('Called relation() on non-relation field ' + attr);\n        }\n\n        value._ensureParentAndKey(this, attr);\n\n        return value;\n      }\n\n      return new _ParseRelation.default(this, attr);\n    }\n    /**\n     * Gets the HTML-escaped value of an attribute.\n     *\n     * @param {string} attr The string name of an attribute.\n     * @returns {string}\n     */\n\n  }, {\n    key: \"escape\",\n    value: function (attr\n    /*: string*/\n    )\n    /*: string*/\n    {\n      var val = this.attributes[attr];\n\n      if (val == null) {\n        return '';\n      }\n\n      if (typeof val !== 'string') {\n        if (typeof val.toString !== 'function') {\n          return '';\n        }\n\n        val = val.toString();\n      }\n\n      return (0, _escape2.default)(val);\n    }\n    /**\n     * Returns <code>true</code> if the attribute contains a value that is not\n     * null or undefined.\n     *\n     * @param {string} attr The string name of the attribute.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"has\",\n    value: function (attr\n    /*: string*/\n    )\n    /*: boolean*/\n    {\n      var attributes = this.attributes;\n\n      if (attributes.hasOwnProperty(attr)) {\n        return attributes[attr] != null;\n      }\n\n      return false;\n    }\n    /**\n     * Sets a hash of model attributes on the object.\n     *\n     * <p>You can call it with an object containing keys and values, with one\n     * key and value, or dot notation.  For example:<pre>\n     *   gameTurn.set({\n     *     player: player1,\n     *     diceRoll: 2\n     *   }, {\n     *     error: function(gameTurnAgain, error) {\n     *       // The set failed validation.\n     *     }\n     *   });\n     *\n     *   game.set(\"currentPlayer\", player2, {\n     *     error: function(gameTurnAgain, error) {\n     *       // The set failed validation.\n     *     }\n     *   });\n     *\n     *   game.set(\"finished\", true);</pre></p>\n     *\n     *   game.set(\"player.score\", 10);</pre></p>\n     *\n     * @param {(string|object)} key The key to set.\n     * @param {(string|object)} value The value to give it.\n     * @param {object} options A set of options for the set.\n     *     The only supported option is <code>error</code>.\n     * @returns {(ParseObject|boolean)} true if the set succeeded.\n     */\n\n  }, {\n    key: \"set\",\n    value: function (key\n    /*: mixed*/\n    , value\n    /*: mixed*/\n    , options\n    /*:: ?: mixed*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      var changes = {};\n      var newOps = {};\n\n      if (key && (0, _typeof2.default)(key) === 'object') {\n        changes = key;\n        options = value;\n      } else if (typeof key === 'string') {\n        changes[key] = value;\n      } else {\n        return this;\n      }\n\n      options = options || {};\n      var readonly = [];\n\n      if (typeof this.constructor.readOnlyAttributes === 'function') {\n        readonly = (0, _concat.default)(readonly).call(readonly, this.constructor.readOnlyAttributes());\n      }\n\n      for (var k in changes) {\n        if (k === 'createdAt' || k === 'updatedAt') {\n          // This property is read-only, but for legacy reasons we silently\n          // ignore it\n          continue;\n        }\n\n        if ((0, _indexOf.default)(readonly).call(readonly, k) > -1) {\n          throw new Error('Cannot modify readonly attribute: ' + k);\n        }\n\n        if (options.unset) {\n          newOps[k] = new _ParseOp.UnsetOp();\n        } else if (changes[k] instanceof _ParseOp.Op) {\n          newOps[k] = changes[k];\n        } else if (changes[k] && (0, _typeof2.default)(changes[k]) === 'object' && typeof changes[k].__op === 'string') {\n          newOps[k] = (0, _ParseOp.opFromJSON)(changes[k]);\n        } else if (k === 'objectId' || k === 'id') {\n          if (typeof changes[k] === 'string') {\n            this.id = changes[k];\n          }\n        } else if (k === 'ACL' && (0, _typeof2.default)(changes[k]) === 'object' && !(changes[k] instanceof _ParseACL.default)) {\n          newOps[k] = new _ParseOp.SetOp(new _ParseACL.default(changes[k]));\n        } else if (changes[k] instanceof _ParseRelation.default) {\n          var relation = new _ParseRelation.default(this, k);\n          relation.targetClassName = changes[k].targetClassName;\n          newOps[k] = new _ParseOp.SetOp(relation);\n        } else {\n          newOps[k] = new _ParseOp.SetOp(changes[k]);\n        }\n      }\n\n      var currentAttributes = this.attributes; // Calculate new values\n\n      var newValues = {};\n\n      for (var _attr9 in newOps) {\n        if (newOps[_attr9] instanceof _ParseOp.RelationOp) {\n          newValues[_attr9] = newOps[_attr9].applyTo(currentAttributes[_attr9], this, _attr9);\n        } else if (!(newOps[_attr9] instanceof _ParseOp.UnsetOp)) {\n          newValues[_attr9] = newOps[_attr9].applyTo(currentAttributes[_attr9]);\n        }\n      } // Validate changes\n\n\n      if (!options.ignoreValidation) {\n        var validation = this.validate(newValues);\n\n        if (validation) {\n          if (typeof options.error === 'function') {\n            options.error(this, validation);\n          }\n\n          return false;\n        }\n      } // Consolidate Ops\n\n\n      var pendingOps = this._getPendingOps();\n\n      var last = pendingOps.length - 1;\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      for (var _attr10 in newOps) {\n        var nextOp = newOps[_attr10].mergeWith(pendingOps[last][_attr10]);\n\n        stateController.setPendingOp(this._getStateIdentifier(), _attr10, nextOp);\n      }\n\n      return this;\n    }\n    /**\n     * Remove an attribute from the model. This is a noop if the attribute doesn't\n     * exist.\n     *\n     * @param {string} attr The string name of an attribute.\n     * @param options\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"unset\",\n    value: function (attr\n    /*: string*/\n    , options\n    /*:: ?: { [opt: string]: mixed }*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      options = options || {};\n      options.unset = true;\n      return this.set(attr, null, options);\n    }\n    /**\n     * Atomically increments the value of the given attribute the next time the\n     * object is saved. If no amount is specified, 1 is used by default.\n     *\n     * @param attr {String} The key.\n     * @param amount {Number} The amount to increment by (optional).\n     * @returns {(ParseObject|boolean)}\n     */\n\n  }, {\n    key: \"increment\",\n    value: function (attr\n    /*: string*/\n    , amount\n    /*:: ?: number*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      if (typeof amount === 'undefined') {\n        amount = 1;\n      }\n\n      if (typeof amount !== 'number') {\n        throw new Error('Cannot increment by a non-numeric amount.');\n      }\n\n      return this.set(attr, new _ParseOp.IncrementOp(amount));\n    }\n    /**\n     * Atomically decrements the value of the given attribute the next time the\n     * object is saved. If no amount is specified, 1 is used by default.\n     *\n     * @param attr {String} The key.\n     * @param amount {Number} The amount to decrement by (optional).\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"decrement\",\n    value: function (attr\n    /*: string*/\n    , amount\n    /*:: ?: number*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      if (typeof amount === 'undefined') {\n        amount = 1;\n      }\n\n      if (typeof amount !== 'number') {\n        throw new Error('Cannot decrement by a non-numeric amount.');\n      }\n\n      return this.set(attr, new _ParseOp.IncrementOp(amount * -1));\n    }\n    /**\n     * Atomically add an object to the end of the array associated with a given\n     * key.\n     *\n     * @param attr {String} The key.\n     * @param item {} The item to add.\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"add\",\n    value: function (attr\n    /*: string*/\n    , item\n    /*: mixed*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set(attr, new _ParseOp.AddOp([item]));\n    }\n    /**\n     * Atomically add the objects to the end of the array associated with a given\n     * key.\n     *\n     * @param attr {String} The key.\n     * @param items {Object[]} The items to add.\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"addAll\",\n    value: function (attr\n    /*: string*/\n    , items\n    /*: Array<mixed>*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set(attr, new _ParseOp.AddOp(items));\n    }\n    /**\n     * Atomically add an object to the array associated with a given key, only\n     * if it is not already present in the array. The position of the insert is\n     * not guaranteed.\n     *\n     * @param attr {String} The key.\n     * @param item {} The object to add.\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"addUnique\",\n    value: function (attr\n    /*: string*/\n    , item\n    /*: mixed*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set(attr, new _ParseOp.AddUniqueOp([item]));\n    }\n    /**\n     * Atomically add the objects to the array associated with a given key, only\n     * if it is not already present in the array. The position of the insert is\n     * not guaranteed.\n     *\n     * @param attr {String} The key.\n     * @param items {Object[]} The objects to add.\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"addAllUnique\",\n    value: function (attr\n    /*: string*/\n    , items\n    /*: Array<mixed>*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set(attr, new _ParseOp.AddUniqueOp(items));\n    }\n    /**\n     * Atomically remove all instances of an object from the array associated\n     * with a given key.\n     *\n     * @param attr {String} The key.\n     * @param item {} The object to remove.\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"remove\",\n    value: function (attr\n    /*: string*/\n    , item\n    /*: mixed*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set(attr, new _ParseOp.RemoveOp([item]));\n    }\n    /**\n     * Atomically remove all instances of the objects from the array associated\n     * with a given key.\n     *\n     * @param attr {String} The key.\n     * @param items {Object[]} The object to remove.\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"removeAll\",\n    value: function (attr\n    /*: string*/\n    , items\n    /*: Array<mixed>*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set(attr, new _ParseOp.RemoveOp(items));\n    }\n    /**\n     * Returns an instance of a subclass of Parse.Op describing what kind of\n     * modification has been performed on this field since the last time it was\n     * saved. For example, after calling object.increment(\"x\"), calling\n     * object.op(\"x\") would return an instance of Parse.Op.Increment.\n     *\n     * @param attr {String} The key.\n     * @returns {Parse.Op} The operation, or undefined if none.\n     */\n\n  }, {\n    key: \"op\",\n    value: function (attr\n    /*: string*/\n    )\n    /*: ?Op*/\n    {\n      var pending = this._getPendingOps();\n\n      for (var i = pending.length; i--;) {\n        if (pending[i][attr]) {\n          return pending[i][attr];\n        }\n      }\n    }\n    /**\n     * Creates a new model with identical attributes to this one.\n     *\n     * @returns {Parse.Object}\n     */\n\n  }, {\n    key: \"clone\",\n    value: function clone()\n    /*: any*/\n    {\n      var clone = new this.constructor(this.className);\n      var attributes = this.attributes;\n\n      if (typeof this.constructor.readOnlyAttributes === 'function') {\n        var readonly = this.constructor.readOnlyAttributes() || []; // Attributes are frozen, so we have to rebuild an object,\n        // rather than delete readonly keys\n\n        var copy = {};\n\n        for (var a in attributes) {\n          if ((0, _indexOf.default)(readonly).call(readonly, a) < 0) {\n            copy[a] = attributes[a];\n          }\n        }\n\n        attributes = copy;\n      }\n\n      if (clone.set) {\n        clone.set(attributes);\n      }\n\n      return clone;\n    }\n    /**\n     * Creates a new instance of this object. Not to be confused with clone()\n     *\n     * @returns {Parse.Object}\n     */\n\n  }, {\n    key: \"newInstance\",\n    value: function ()\n    /*: any*/\n    {\n      var clone = new this.constructor(this.className);\n      clone.id = this.id;\n\n      if (singleInstance) {\n        // Just return an object with the right id\n        return clone;\n      }\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      if (stateController) {\n        stateController.duplicateState(this._getStateIdentifier(), clone._getStateIdentifier());\n      }\n\n      return clone;\n    }\n    /**\n     * Returns true if this object has never been saved to Parse.\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isNew\",\n    value: function ()\n    /*: boolean*/\n    {\n      return !this.id;\n    }\n    /**\n     * Returns true if this object was created by the Parse server when the\n     * object might have already been there (e.g. in the case of a Facebook\n     * login)\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"existed\",\n    value: function ()\n    /*: boolean*/\n    {\n      if (!this.id) {\n        return false;\n      }\n\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      var state = stateController.getState(this._getStateIdentifier());\n\n      if (state) {\n        return state.existed;\n      }\n\n      return false;\n    }\n    /**\n     * Returns true if this object exists on the Server\n     *\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     * </ul>\n     * @returns {Promise<boolean>} A boolean promise that is fulfilled if object exists.\n     */\n\n  }, {\n    key: \"exists\",\n    value: function () {\n      var _exists = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee(options\n      /*:: ?: RequestOptions*/\n      ) {\n        var query;\n        return _regenerator.default.wrap(function (_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (this.id) {\n                  _context.next = 2;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", false);\n\n              case 2:\n                _context.prev = 2;\n                query = new _ParseQuery.default(this.className);\n                _context.next = 6;\n                return query.get(this.id, options);\n\n              case 6:\n                return _context.abrupt(\"return\", true);\n\n              case 9:\n                _context.prev = 9;\n                _context.t0 = _context[\"catch\"](2);\n\n                if (!(_context.t0.code === _ParseError.default.OBJECT_NOT_FOUND)) {\n                  _context.next = 13;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", false);\n\n              case 13:\n                throw _context.t0;\n\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[2, 9]]);\n      }));\n\n      return function () {\n        return _exists.apply(this, arguments);\n      };\n    }()\n    /**\n     * Checks if the model is currently in a valid state.\n     *\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isValid\",\n    value: function ()\n    /*: boolean*/\n    {\n      return !this.validate(this.attributes);\n    }\n    /**\n     * You should not call this function directly unless you subclass\n     * <code>Parse.Object</code>, in which case you can override this method\n     * to provide additional validation on <code>set</code> and\n     * <code>save</code>.  Your implementation should return\n     *\n     * @param {object} attrs The current data to validate.\n     * @returns {Parse.Error|boolean} False if the data is valid.  An error object otherwise.\n     * @see Parse.Object#set\n     */\n\n  }, {\n    key: \"validate\",\n    value: function (attrs\n    /*: AttributeMap*/\n    )\n    /*: ParseError | boolean*/\n    {\n      if (attrs.hasOwnProperty('ACL') && !(attrs.ACL instanceof _ParseACL.default)) {\n        return new _ParseError.default(_ParseError.default.OTHER_CAUSE, 'ACL must be a Parse ACL.');\n      }\n\n      for (var _key in attrs) {\n        if (!/^[A-Za-z][0-9A-Za-z_.]*$/.test(_key)) {\n          return new _ParseError.default(_ParseError.default.INVALID_KEY_NAME);\n        }\n      }\n\n      return false;\n    }\n    /**\n     * Returns the ACL for this object.\n     *\n     * @returns {Parse.ACL} An instance of Parse.ACL.\n     * @see Parse.Object#get\n     */\n\n  }, {\n    key: \"getACL\",\n    value: function ()\n    /*: ?ParseACL*/\n    {\n      var acl = this.get('ACL');\n\n      if (acl instanceof _ParseACL.default) {\n        return acl;\n      }\n\n      return null;\n    }\n    /**\n     * Sets the ACL to be used for this object.\n     *\n     * @param {Parse.ACL} acl An instance of Parse.ACL.\n     * @param {object} options\n     * @returns {(ParseObject | boolean)} Whether the set passed validation.\n     * @see Parse.Object#set\n     */\n\n  }, {\n    key: \"setACL\",\n    value: function (acl\n    /*: ParseACL*/\n    , options\n    /*:: ?: mixed*/\n    )\n    /*: ParseObject | boolean*/\n    {\n      return this.set('ACL', acl, options);\n    }\n    /**\n     * Clears any (or specific) changes to this object made since the last call to save()\n     *\n     * @param {string} [keys] - specify which fields to revert\n     */\n\n  }, {\n    key: \"revert\",\n    value: function ()\n    /*: void*/\n    {\n      var keysToRevert;\n\n      for (var _len = arguments.length, keys = new Array(_len), _key2 = 0; _key2 < _len; _key2++) {\n        keys[_key2] = arguments[_key2];\n      }\n\n      if (keys.length) {\n        keysToRevert = [];\n\n        var _iterator = _createForOfIteratorHelper(keys),\n            _step;\n\n        try {\n          for (_iterator.s(); !(_step = _iterator.n()).done;) {\n            var _key3 = _step.value;\n\n            if (typeof _key3 === 'string') {\n              keysToRevert.push(_key3);\n            } else {\n              throw new Error('Parse.Object#revert expects either no, or a list of string, arguments.');\n            }\n          }\n        } catch (err) {\n          _iterator.e(err);\n        } finally {\n          _iterator.f();\n        }\n      }\n\n      this._clearPendingOps(keysToRevert);\n    }\n    /**\n     * Clears all attributes on a model\n     *\n     * @returns {(ParseObject | boolean)}\n     */\n\n  }, {\n    key: \"clear\",\n    value: function ()\n    /*: ParseObject | boolean*/\n    {\n      var attributes = this.attributes;\n      var erasable = {};\n      var readonly = ['createdAt', 'updatedAt'];\n\n      if (typeof this.constructor.readOnlyAttributes === 'function') {\n        readonly = (0, _concat.default)(readonly).call(readonly, this.constructor.readOnlyAttributes());\n      }\n\n      for (var _attr11 in attributes) {\n        if ((0, _indexOf.default)(readonly).call(readonly, _attr11) < 0) {\n          erasable[_attr11] = true;\n        }\n      }\n\n      return this.set(erasable, {\n        unset: true\n      });\n    }\n    /**\n     * Fetch the model from the server. If the server's representation of the\n     * model differs from its current attributes, they will be overriden.\n     *\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     *   <li>include: The name(s) of the key(s) to include. Can be a string, an array of strings,\n     *       or an array of array of strings.\n     *   <li>context: A dictionary that is accessible in Cloud Code `beforeFind` trigger.\n     * </ul>\n     * @returns {Promise} A promise that is fulfilled when the fetch\n     *     completes.\n     */\n\n  }, {\n    key: \"fetch\",\n    value: function (options\n    /*: RequestOptions*/\n    )\n    /*: Promise*/\n    {\n      options = options || {};\n      var fetchOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        fetchOptions.useMasterKey = options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken')) {\n        fetchOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('context') && (0, _typeof2.default)(options.context) === 'object') {\n        fetchOptions.context = options.context;\n      }\n\n      if (options.hasOwnProperty('include')) {\n        fetchOptions.include = [];\n\n        if ((0, _isArray.default)(options.include)) {\n          var _context2;\n\n          (0, _forEach.default)(_context2 = options.include).call(_context2, function (key) {\n            if ((0, _isArray.default)(key)) {\n              var _context3;\n\n              fetchOptions.include = (0, _concat.default)(_context3 = fetchOptions.include).call(_context3, key);\n            } else {\n              fetchOptions.include.push(key);\n            }\n          });\n        } else {\n          fetchOptions.include.push(options.include);\n        }\n      }\n\n      var controller = _CoreManager.default.getObjectController();\n\n      return controller.fetch(this, true, fetchOptions);\n    }\n    /**\n     * Fetch the model from the server. If the server's representation of the\n     * model differs from its current attributes, they will be overriden.\n     *\n     * Includes nested Parse.Objects for the provided key. You can use dot\n     * notation to specify which fields in the included object are also fetched.\n     *\n     * @param {string | Array<string | Array<string>>} keys The name(s) of the key(s) to include.\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     * </ul>\n     * @returns {Promise} A promise that is fulfilled when the fetch\n     *     completes.\n     */\n\n  }, {\n    key: \"fetchWithInclude\",\n    value: function (keys\n    /*: String | Array<string | Array<string>>*/\n    , options\n    /*: RequestOptions*/\n    )\n    /*: Promise*/\n    {\n      options = options || {};\n      options.include = keys;\n      return this.fetch(options);\n    }\n    /**\n     * Saves this object to the server at some unspecified time in the future,\n     * even if Parse is currently inaccessible.\n     *\n     * Use this when you may not have a solid network connection, and don't need to know when the save completes.\n     * If there is some problem with the object such that it can't be saved, it will be silently discarded.\n     *\n     * Objects saved with this method will be stored locally in an on-disk cache until they can be delivered to Parse.\n     * They will be sent immediately if possible. Otherwise, they will be sent the next time a network connection is\n     * available. Objects saved this way will persist even after the app is closed, in which case they will be sent the\n     * next time the app is opened.\n     *\n     * @param {object} [options]\n     * Used to pass option parameters to method if arg1 and arg2 were both passed as strings.\n     * Valid options are:\n     * <ul>\n     * <li>sessionToken: A valid session token, used for making a request on\n     * behalf of a specific user.\n     * <li>cascadeSave: If `false`, nested objects will not be saved (default is `true`).\n     * <li>context: A dictionary that is accessible in Cloud Code `beforeSave` and `afterSave` triggers.\n     * </ul>\n     * @returns {Promise} A promise that is fulfilled when the save\n     * completes.\n     */\n\n  }, {\n    key: \"saveEventually\",\n    value: function () {\n      var _saveEventually = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee2(options\n      /*: SaveOptions*/\n      ) {\n        return _regenerator.default.wrap(function (_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                _context4.next = 3;\n                return this.save(null, options);\n\n              case 3:\n                _context4.next = 11;\n                break;\n\n              case 5:\n                _context4.prev = 5;\n                _context4.t0 = _context4[\"catch\"](0);\n\n                if (!(_context4.t0.message === 'XMLHttpRequest failed: \"Unable to connect to the Parse API\"')) {\n                  _context4.next = 11;\n                  break;\n                }\n\n                _context4.next = 10;\n                return _EventuallyQueue.default.save(this, options);\n\n              case 10:\n                _EventuallyQueue.default.poll();\n\n              case 11:\n                return _context4.abrupt(\"return\", this);\n\n              case 12:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee2, this, [[0, 5]]);\n      }));\n\n      return function () {\n        return _saveEventually.apply(this, arguments);\n      };\n    }()\n    /**\n     * Set a hash of model attributes, and save the model to the server.\n     * updatedAt will be updated when the request returns.\n     * You can either call it as:<pre>\n     * object.save();</pre>\n     * or<pre>\n     * object.save(attrs);</pre>\n     * or<pre>\n     * object.save(null, options);</pre>\n     * or<pre>\n     * object.save(attrs, options);</pre>\n     * or<pre>\n     * object.save(key, value);</pre>\n     * or<pre>\n     * object.save(key, value, options);</pre>\n     *\n     * Example 1: <pre>\n     * gameTurn.save({\n     * player: \"Jake Cutter\",\n     * diceRoll: 2\n     * }).then(function(gameTurnAgain) {\n     * // The save was successful.\n     * }, function(error) {\n     * // The save failed.  Error is an instance of Parse.Error.\n     * });</pre>\n     *\n     * Example 2: <pre>\n     * gameTurn.save(\"player\", \"Jake Cutter\");</pre>\n     *\n     * @param {string | object | null} [arg1]\n     * Valid options are:<ul>\n     * <li>`Object` - Key/value pairs to update on the object.</li>\n     * <li>`String` Key - Key of attribute to update (requires arg2 to also be string)</li>\n     * <li>`null` - Passing null for arg1 allows you to save the object with options passed in arg2.</li>\n     * </ul>\n     * @param {string | object} [arg2]\n     * <ul>\n     * <li>`String` Value - If arg1 was passed as a key, arg2 is the value that should be set on that key.</li>\n     * <li>`Object` Options - Valid options are:\n     * <ul>\n     * <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     * be used for this request.\n     * <li>sessionToken: A valid session token, used for making a request on\n     * behalf of a specific user.\n     * <li>cascadeSave: If `false`, nested objects will not be saved (default is `true`).\n     * <li>context: A dictionary that is accessible in Cloud Code `beforeSave` and `afterSave` triggers.\n     * </ul>\n     * </li>\n     * </ul>\n     * @param {object} [arg3]\n     * Used to pass option parameters to method if arg1 and arg2 were both passed as strings.\n     * Valid options are:\n     * <ul>\n     * <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     * be used for this request.\n     * <li>sessionToken: A valid session token, used for making a request on\n     * behalf of a specific user.\n     * <li>cascadeSave: If `false`, nested objects will not be saved (default is `true`).\n     * <li>context: A dictionary that is accessible in Cloud Code `beforeSave` and `afterSave` triggers.\n     * </ul>\n     * @returns {Promise} A promise that is fulfilled when the save\n     * completes.\n     */\n\n  }, {\n    key: \"save\",\n    value: function (arg1\n    /*: ?string | { [attr: string]: mixed }*/\n    , arg2\n    /*: SaveOptions | mixed*/\n    , arg3\n    /*:: ?: SaveOptions*/\n    )\n    /*: Promise*/\n    {\n      var _this = this;\n\n      var attrs;\n      var options;\n\n      if ((0, _typeof2.default)(arg1) === 'object' || typeof arg1 === 'undefined') {\n        attrs = arg1;\n\n        if ((0, _typeof2.default)(arg2) === 'object') {\n          options = arg2;\n        }\n      } else {\n        attrs = {};\n        attrs[arg1] = arg2;\n        options = arg3;\n      }\n\n      if (attrs) {\n        var validation = this.validate(attrs);\n\n        if (validation) {\n          return _promise.default.reject(validation);\n        }\n\n        this.set(attrs, options);\n      }\n\n      options = options || {};\n      var saveOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        saveOptions.useMasterKey = !!options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken') && typeof options.sessionToken === 'string') {\n        saveOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('installationId') && typeof options.installationId === 'string') {\n        saveOptions.installationId = options.installationId;\n      }\n\n      if (options.hasOwnProperty('context') && (0, _typeof2.default)(options.context) === 'object') {\n        saveOptions.context = options.context;\n      }\n\n      var controller = _CoreManager.default.getObjectController();\n\n      var unsaved = options.cascadeSave !== false ? (0, _unsavedChildren.default)(this) : null;\n      return controller.save(unsaved, saveOptions).then(function () {\n        return controller.save(_this, saveOptions);\n      });\n    }\n    /**\n     * Deletes this object from the server at some unspecified time in the future,\n     * even if Parse is currently inaccessible.\n     *\n     * Use this when you may not have a solid network connection,\n     * and don't need to know when the delete completes. If there is some problem with the object\n     * such that it can't be deleted, the request will be silently discarded.\n     *\n     * Delete instructions made with this method will be stored locally in an on-disk cache until they can be transmitted\n     * to Parse. They will be sent immediately if possible. Otherwise, they will be sent the next time a network connection\n     * is available. Delete requests will persist even after the app is closed, in which case they will be sent the\n     * next time the app is opened.\n     *\n     * @param {object} [options]\n     * Valid options are:<ul>\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     *   <li>context: A dictionary that is accessible in Cloud Code `beforeDelete` and `afterDelete` triggers.\n     * </ul>\n     * @returns {Promise} A promise that is fulfilled when the destroy\n     *     completes.\n     */\n\n  }, {\n    key: \"destroyEventually\",\n    value: function () {\n      var _destroyEventually = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee3(options\n      /*: RequestOptions*/\n      ) {\n        return _regenerator.default.wrap(function (_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.prev = 0;\n                _context5.next = 3;\n                return this.destroy(options);\n\n              case 3:\n                _context5.next = 11;\n                break;\n\n              case 5:\n                _context5.prev = 5;\n                _context5.t0 = _context5[\"catch\"](0);\n\n                if (!(_context5.t0.message === 'XMLHttpRequest failed: \"Unable to connect to the Parse API\"')) {\n                  _context5.next = 11;\n                  break;\n                }\n\n                _context5.next = 10;\n                return _EventuallyQueue.default.destroy(this, options);\n\n              case 10:\n                _EventuallyQueue.default.poll();\n\n              case 11:\n                return _context5.abrupt(\"return\", this);\n\n              case 12:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee3, this, [[0, 5]]);\n      }));\n\n      return function () {\n        return _destroyEventually.apply(this, arguments);\n      };\n    }()\n    /**\n     * Destroy this model on the server if it was already persisted.\n     *\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     *   <li>context: A dictionary that is accessible in Cloud Code `beforeDelete` and `afterDelete` triggers.\n     * </ul>\n     * @returns {Promise} A promise that is fulfilled when the destroy\n     *     completes.\n     */\n\n  }, {\n    key: \"destroy\",\n    value: function (options\n    /*: RequestOptions*/\n    )\n    /*: Promise*/\n    {\n      options = options || {};\n      var destroyOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        destroyOptions.useMasterKey = options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken')) {\n        destroyOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('context') && (0, _typeof2.default)(options.context) === 'object') {\n        destroyOptions.context = options.context;\n      }\n\n      if (!this.id) {\n        return _promise.default.resolve();\n      }\n\n      return _CoreManager.default.getObjectController().destroy(this, destroyOptions);\n    }\n    /**\n     * Asynchronously stores the object and every object it points to in the local datastore,\n     * recursively, using a default pin name: _default.\n     *\n     * If those other objects have not been fetched from Parse, they will not be stored.\n     * However, if they have changed data, all the changes will be retained.\n     *\n     * <pre>\n     * await object.pin();\n     * </pre>\n     *\n     * To retrieve object:\n     * <code>query.fromLocalDatastore()</code> or <code>query.fromPin()</code>\n     *\n     * @returns {Promise} A promise that is fulfilled when the pin completes.\n     */\n\n  }, {\n    key: \"pin\",\n    value: function ()\n    /*: Promise<void>*/\n    {\n      return ParseObject.pinAllWithName(_LocalDatastoreUtils.DEFAULT_PIN, [this]);\n    }\n    /**\n     * Asynchronously removes the object and every object it points to in the local datastore,\n     * recursively, using a default pin name: _default.\n     *\n     * <pre>\n     * await object.unPin();\n     * </pre>\n     *\n     * @returns {Promise} A promise that is fulfilled when the unPin completes.\n     */\n\n  }, {\n    key: \"unPin\",\n    value: function ()\n    /*: Promise<void>*/\n    {\n      return ParseObject.unPinAllWithName(_LocalDatastoreUtils.DEFAULT_PIN, [this]);\n    }\n    /**\n     * Asynchronously returns if the object is pinned\n     *\n     * <pre>\n     * const isPinned = await object.isPinned();\n     * </pre>\n     *\n     * @returns {Promise<boolean>} A boolean promise that is fulfilled if object is pinned.\n     */\n\n  }, {\n    key: \"isPinned\",\n    value: function () {\n      var _isPinned = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee4() {\n        var localDatastore, objectKey, pin;\n        return _regenerator.default.wrap(function (_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                localDatastore = _CoreManager.default.getLocalDatastore();\n\n                if (localDatastore.isEnabled) {\n                  _context6.next = 3;\n                  break;\n                }\n\n                return _context6.abrupt(\"return\", _promise.default.reject('Parse.enableLocalDatastore() must be called first'));\n\n              case 3:\n                objectKey = localDatastore.getKeyForObject(this);\n                _context6.next = 6;\n                return localDatastore.fromPinWithName(objectKey);\n\n              case 6:\n                pin = _context6.sent;\n                return _context6.abrupt(\"return\", pin.length > 0);\n\n              case 8:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      return function () {\n        return _isPinned.apply(this, arguments);\n      };\n    }()\n    /**\n     * Asynchronously stores the objects and every object they point to in the local datastore, recursively.\n     *\n     * If those other objects have not been fetched from Parse, they will not be stored.\n     * However, if they have changed data, all the changes will be retained.\n     *\n     * <pre>\n     * await object.pinWithName(name);\n     * </pre>\n     *\n     * To retrieve object:\n     * <code>query.fromLocalDatastore()</code> or <code>query.fromPinWithName(name)</code>\n     *\n     * @param {string} name Name of Pin.\n     * @returns {Promise} A promise that is fulfilled when the pin completes.\n     */\n\n  }, {\n    key: \"pinWithName\",\n    value: function (name\n    /*: string*/\n    )\n    /*: Promise<void>*/\n    {\n      return ParseObject.pinAllWithName(name, [this]);\n    }\n    /**\n     * Asynchronously removes the object and every object it points to in the local datastore, recursively.\n     *\n     * <pre>\n     * await object.unPinWithName(name);\n     * </pre>\n     *\n     * @param {string} name Name of Pin.\n     * @returns {Promise} A promise that is fulfilled when the unPin completes.\n     */\n\n  }, {\n    key: \"unPinWithName\",\n    value: function (name\n    /*: string*/\n    )\n    /*: Promise<void>*/\n    {\n      return ParseObject.unPinAllWithName(name, [this]);\n    }\n    /**\n     * Asynchronously loads data from the local datastore into this object.\n     *\n     * <pre>\n     * await object.fetchFromLocalDatastore();\n     * </pre>\n     *\n     * You can create an unfetched pointer with <code>Parse.Object.createWithoutData()</code>\n     * and then call <code>fetchFromLocalDatastore()</code> on it.\n     *\n     * @returns {Promise} A promise that is fulfilled when the fetch completes.\n     */\n\n  }, {\n    key: \"fetchFromLocalDatastore\",\n    value: function () {\n      var _fetchFromLocalDatastore = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee5() {\n        var localDatastore, objectKey, pinned, result;\n        return _regenerator.default.wrap(function (_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                localDatastore = _CoreManager.default.getLocalDatastore();\n\n                if (localDatastore.isEnabled) {\n                  _context7.next = 3;\n                  break;\n                }\n\n                throw new Error('Parse.enableLocalDatastore() must be called first');\n\n              case 3:\n                objectKey = localDatastore.getKeyForObject(this);\n                _context7.next = 6;\n                return localDatastore._serializeObject(objectKey);\n\n              case 6:\n                pinned = _context7.sent;\n\n                if (pinned) {\n                  _context7.next = 9;\n                  break;\n                }\n\n                throw new Error('Cannot fetch an unsaved ParseObject');\n\n              case 9:\n                result = ParseObject.fromJSON(pinned);\n\n                this._finishFetch(result.toJSON());\n\n                return _context7.abrupt(\"return\", this);\n\n              case 12:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee5, this);\n      }));\n\n      return function () {\n        return _fetchFromLocalDatastore.apply(this, arguments);\n      };\n    }()\n    /** Static methods **/\n\n  }], [{\n    key: \"_getClassMap\",\n    value: function () {\n      return classMap;\n    }\n  }, {\n    key: \"_clearAllState\",\n    value: function () {\n      var stateController = _CoreManager.default.getObjectStateController();\n\n      stateController.clearAllState();\n    }\n    /**\n     * Fetches the given list of Parse.Object.\n     * If any error is encountered, stops and calls the error handler.\n     *\n     * <pre>\n     *   Parse.Object.fetchAll([object1, object2, ...])\n     *    .then((list) => {\n     *      // All the objects were fetched.\n     *    }, (error) => {\n     *      // An error occurred while fetching one of the objects.\n     *    });\n     * </pre>\n     *\n     * @param {Array} list A list of <code>Parse.Object</code>.\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     *   <li>include: The name(s) of the key(s) to include. Can be a string, an array of strings,\n     *       or an array of array of strings.\n     * </ul>\n     * @static\n     * @returns {Parse.Object[]}\n     */\n\n  }, {\n    key: \"fetchAll\",\n    value: function (list\n    /*: Array<ParseObject>*/\n    ) {\n      var options\n      /*: RequestOptions*/\n      = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var queryOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        queryOptions.useMasterKey = options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken')) {\n        queryOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('include')) {\n        queryOptions.include = ParseObject.handleIncludeOptions(options);\n      }\n\n      return _CoreManager.default.getObjectController().fetch(list, true, queryOptions);\n    }\n    /**\n     * Fetches the given list of Parse.Object.\n     *\n     * Includes nested Parse.Objects for the provided key. You can use dot\n     * notation to specify which fields in the included object are also fetched.\n     *\n     * If any error is encountered, stops and calls the error handler.\n     *\n     * <pre>\n     *   Parse.Object.fetchAllWithInclude([object1, object2, ...], [pointer1, pointer2, ...])\n     *    .then((list) => {\n     *      // All the objects were fetched.\n     *    }, (error) => {\n     *      // An error occurred while fetching one of the objects.\n     *    });\n     * </pre>\n     *\n     * @param {Array} list A list of <code>Parse.Object</code>.\n     * @param {string | Array<string | Array<string>>} keys The name(s) of the key(s) to include.\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     * </ul>\n     * @static\n     * @returns {Parse.Object[]}\n     */\n\n  }, {\n    key: \"fetchAllWithInclude\",\n    value: function (list\n    /*: Array<ParseObject>*/\n    , keys\n    /*: String | Array<string | Array<string>>*/\n    , options\n    /*: RequestOptions*/\n    ) {\n      options = options || {};\n      options.include = keys;\n      return ParseObject.fetchAll(list, options);\n    }\n    /**\n     * Fetches the given list of Parse.Object if needed.\n     * If any error is encountered, stops and calls the error handler.\n     *\n     * Includes nested Parse.Objects for the provided key. You can use dot\n     * notation to specify which fields in the included object are also fetched.\n     *\n     * If any error is encountered, stops and calls the error handler.\n     *\n     * <pre>\n     *   Parse.Object.fetchAllIfNeededWithInclude([object1, object2, ...], [pointer1, pointer2, ...])\n     *    .then((list) => {\n     *      // All the objects were fetched.\n     *    }, (error) => {\n     *      // An error occurred while fetching one of the objects.\n     *    });\n     * </pre>\n     *\n     * @param {Array} list A list of <code>Parse.Object</code>.\n     * @param {string | Array<string | Array<string>>} keys The name(s) of the key(s) to include.\n     * @param {object} options\n     * Valid options are:<ul>\n     *   <li>useMasterKey: In Cloud Code and Node only, causes the Master Key to\n     *     be used for this request.\n     *   <li>sessionToken: A valid session token, used for making a request on\n     *       behalf of a specific user.\n     * </ul>\n     * @static\n     * @returns {Parse.Object[]}\n     */\n\n  }, {\n    key: \"fetchAllIfNeededWithInclude\",\n    value: function (list\n    /*: Array<ParseObject>*/\n    , keys\n    /*: String | Array<string | Array<string>>*/\n    , options\n    /*: RequestOptions*/\n    ) {\n      options = options || {};\n      options.include = keys;\n      return ParseObject.fetchAllIfNeeded(list, options);\n    }\n    /**\n     * Fetches the given list of Parse.Object if needed.\n     * If any error is encountered, stops and calls the error handler.\n     *\n     * <pre>\n     *   Parse.Object.fetchAllIfNeeded([object1, ...])\n     *    .then((list) => {\n     *      // Objects were fetched and updated.\n     *    }, (error) => {\n     *      // An error occurred while fetching one of the objects.\n     *    });\n     * </pre>\n     *\n     * @param {Array} list A list of <code>Parse.Object</code>.\n     * @param {object} options\n     * @static\n     * @returns {Parse.Object[]}\n     */\n\n  }, {\n    key: \"fetchAllIfNeeded\",\n    value: function (list\n    /*: Array<ParseObject>*/\n    , options) {\n      options = options || {};\n      var queryOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        queryOptions.useMasterKey = options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken')) {\n        queryOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('include')) {\n        queryOptions.include = ParseObject.handleIncludeOptions(options);\n      }\n\n      return _CoreManager.default.getObjectController().fetch(list, false, queryOptions);\n    }\n  }, {\n    key: \"handleIncludeOptions\",\n    value: function (options) {\n      var include = [];\n\n      if ((0, _isArray.default)(options.include)) {\n        var _context8;\n\n        (0, _forEach.default)(_context8 = options.include).call(_context8, function (key) {\n          if ((0, _isArray.default)(key)) {\n            include = (0, _concat.default)(include).call(include, key);\n          } else {\n            include.push(key);\n          }\n        });\n      } else {\n        include.push(options.include);\n      }\n\n      return include;\n    }\n    /**\n     * Destroy the given list of models on the server if it was already persisted.\n     *\n     * <p>Unlike saveAll, if an error occurs while deleting an individual model,\n     * this method will continue trying to delete the rest of the models if\n     * possible, except in the case of a fatal error like a connection error.\n     *\n     * <p>In particular, the Parse.Error object returned in the case of error may\n     * be one of two types:\n     *\n     * <ul>\n     * <li>A Parse.Error.AGGREGATE_ERROR. This object's \"errors\" property is an\n     * array of other Parse.Error objects. Each error object in this array\n     * has an \"object\" property that references the object that could not be\n     * deleted (for instance, because that object could not be found).</li>\n     * <li>A non-aggregate Parse.Error. This indicates a serious error that\n     * caused the delete operation to be aborted partway through (for\n     * instance, a connection failure in the middle of the delete).</li>\n     * </ul>\n     *\n     * <pre>\n     * Parse.Object.destroyAll([object1, object2, ...])\n     * .then((list) => {\n     * // All the objects were deleted.\n     * }, (error) => {\n     * // An error occurred while deleting one or more of the objects.\n     * // If this is an aggregate error, then we can inspect each error\n     * // object individually to determine the reason why a particular\n     * // object was not deleted.\n     * if (error.code === Parse.Error.AGGREGATE_ERROR) {\n     * for (var i = 0; i < error.errors.length; i++) {\n     * console.log(\"Couldn't delete \" + error.errors[i].object.id +\n     * \"due to \" + error.errors[i].message);\n     * }\n     * } else {\n     * console.log(\"Delete aborted because of \" + error.message);\n     * }\n     * });\n     * </pre>\n     *\n     * @param {Array} list A list of <code>Parse.Object</code>.\n     * @param {object} options\n     * @static\n     * @returns {Promise} A promise that is fulfilled when the destroyAll\n     * completes.\n     */\n\n  }, {\n    key: \"destroyAll\",\n    value: function (list\n    /*: Array<ParseObject>*/\n    ) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var destroyOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        destroyOptions.useMasterKey = options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken')) {\n        destroyOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('batchSize') && typeof options.batchSize === 'number') {\n        destroyOptions.batchSize = options.batchSize;\n      }\n\n      if (options.hasOwnProperty('context') && (0, _typeof2.default)(options.context) === 'object') {\n        destroyOptions.context = options.context;\n      }\n\n      return _CoreManager.default.getObjectController().destroy(list, destroyOptions);\n    }\n    /**\n     * Saves the given list of Parse.Object.\n     * If any error is encountered, stops and calls the error handler.\n     *\n     * <pre>\n     * Parse.Object.saveAll([object1, object2, ...])\n     * .then((list) => {\n     * // All the objects were saved.\n     * }, (error) => {\n     * // An error occurred while saving one of the objects.\n     * });\n     * </pre>\n     *\n     * @param {Array} list A list of <code>Parse.Object</code>.\n     * @param {object} options\n     * @static\n     * @returns {Parse.Object[]}\n     */\n\n  }, {\n    key: \"saveAll\",\n    value: function (list\n    /*: Array<ParseObject>*/\n    ) {\n      var options\n      /*: RequestOptions*/\n      = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var saveOptions = {};\n\n      if (options.hasOwnProperty('useMasterKey')) {\n        saveOptions.useMasterKey = options.useMasterKey;\n      }\n\n      if (options.hasOwnProperty('sessionToken')) {\n        saveOptions.sessionToken = options.sessionToken;\n      }\n\n      if (options.hasOwnProperty('batchSize') && typeof options.batchSize === 'number') {\n        saveOptions.batchSize = options.batchSize;\n      }\n\n      if (options.hasOwnProperty('context') && (0, _typeof2.default)(options.context) === 'object') {\n        saveOptions.context = options.context;\n      }\n\n      return _CoreManager.default.getObjectController().save(list, saveOptions);\n    }\n    /**\n     * Creates a reference to a subclass of Parse.Object with the given id. This\n     * does not exist on Parse.Object, only on subclasses.\n     *\n     * <p>A shortcut for: <pre>\n     *  var Foo = Parse.Object.extend(\"Foo\");\n     *  var pointerToFoo = new Foo();\n     *  pointerToFoo.id = \"myObjectId\";\n     * </pre>\n     *\n     * @param {string} id The ID of the object to create a reference to.\n     * @static\n     * @returns {Parse.Object} A Parse.Object reference.\n     */\n\n  }, {\n    key: \"createWithoutData\",\n    value: function (id\n    /*: string*/\n    ) {\n      var obj = new this();\n      obj.id = id;\n      return obj;\n    }\n    /**\n     * Creates a new instance of a Parse Object from a JSON representation.\n     *\n     * @param {object} json The JSON map of the Object's data\n     * @param {boolean} override In single instance mode, all old server data\n     *   is overwritten if this is set to true\n     * @param {boolean} dirty Whether the Parse.Object should set JSON keys to dirty\n     * @static\n     * @returns {Parse.Object} A Parse.Object reference\n     */\n\n  }, {\n    key: \"fromJSON\",\n    value: function (json\n    /*: any*/\n    , override\n    /*:: ?: boolean*/\n    , dirty\n    /*:: ?: boolean*/\n    ) {\n      if (!json.className) {\n        throw new Error('Cannot create an object without a className');\n      }\n\n      var constructor = classMap[json.className];\n      var o = constructor ? new constructor(json.className) : new ParseObject(json.className);\n      var otherAttributes = {};\n\n      for (var _attr12 in json) {\n        if (_attr12 !== 'className' && _attr12 !== '__type') {\n          otherAttributes[_attr12] = json[_attr12];\n\n          if (dirty) {\n            o.set(_attr12, json[_attr12]);\n          }\n        }\n      }\n\n      if (override) {\n        // id needs to be set before clearServerData can work\n        if (otherAttributes.objectId) {\n          o.id = otherAttributes.objectId;\n        }\n\n        var preserved = null;\n\n        if (typeof o._preserveFieldsOnFetch === 'function') {\n          preserved = o._preserveFieldsOnFetch();\n        }\n\n        o._clearServerData();\n\n        if (preserved) {\n          o._finishFetch(preserved);\n        }\n      }\n\n      o._finishFetch(otherAttributes);\n\n      if (json.objectId) {\n        o._setExisted(true);\n      }\n\n      return o;\n    }\n    /**\n     * Registers a subclass of Parse.Object with a specific class name.\n     * When objects of that class are retrieved from a query, they will be\n     * instantiated with this subclass.\n     * This is only necessary when using ES6 subclassing.\n     *\n     * @param {string} className The class name of the subclass\n     * @param {Function} constructor The subclass\n     */\n\n  }, {\n    key: \"registerSubclass\",\n    value: function (className\n    /*: string*/\n    , constructor\n    /*: any*/\n    ) {\n      if (typeof className !== 'string') {\n        throw new TypeError('The first argument must be a valid class name.');\n      }\n\n      if (typeof constructor === 'undefined') {\n        throw new TypeError('You must supply a subclass constructor.');\n      }\n\n      if (typeof constructor !== 'function') {\n        throw new TypeError('You must register the subclass constructor. ' + 'Did you attempt to register an instance of the subclass?');\n      }\n\n      classMap[className] = constructor;\n\n      if (!constructor.className) {\n        constructor.className = className;\n      }\n    }\n    /**\n     * Unegisters a subclass of Parse.Object with a specific class name.\n     *\n     * @param {string} className The class name of the subclass\n     */\n\n  }, {\n    key: \"unregisterSubclass\",\n    value: function (className\n    /*: string*/\n    ) {\n      if (typeof className !== 'string') {\n        throw new TypeError('The first argument must be a valid class name.');\n      }\n\n      delete classMap[className];\n    }\n    /**\n     * Creates a new subclass of Parse.Object for the given Parse class name.\n     *\n     * <p>Every extension of a Parse class will inherit from the most recent\n     * previous extension of that class. When a Parse.Object is automatically\n     * created by parsing JSON, it will use the most recent extension of that\n     * class.</p>\n     *\n     * <p>You should call either:<pre>\n     *     var MyClass = Parse.Object.extend(\"MyClass\", {\n     *         <i>Instance methods</i>,\n     *         initialize: function(attrs, options) {\n     *             this.someInstanceProperty = [],\n     *             <i>Other instance properties</i>\n     *         }\n     *     }, {\n     *         <i>Class properties</i>\n     *     });</pre>\n     * or, for Backbone compatibility:<pre>\n     *     var MyClass = Parse.Object.extend({\n     *         className: \"MyClass\",\n     *         <i>Instance methods</i>,\n     *         initialize: function(attrs, options) {\n     *             this.someInstanceProperty = [],\n     *             <i>Other instance properties</i>\n     *         }\n     *     }, {\n     *         <i>Class properties</i>\n     *     });</pre></p>\n     *\n     * @param {string} className The name of the Parse class backing this model.\n     * @param {object} protoProps Instance properties to add to instances of the\n     *     class returned from this method.\n     * @param {object} classProps Class properties to add the class returned from\n     *     this method.\n     * @returns {Parse.Object} A new subclass of Parse.Object.\n     */\n\n  }, {\n    key: \"extend\",\n    value: function (className\n    /*: any*/\n    , protoProps\n    /*: any*/\n    , classProps\n    /*: any*/\n    ) {\n      if (typeof className !== 'string') {\n        if (className && typeof className.className === 'string') {\n          return ParseObject.extend(className.className, className, protoProps);\n        } else {\n          throw new Error(\"Parse.Object.extend's first argument should be the className.\");\n        }\n      }\n\n      var adjustedClassName = className;\n\n      if (adjustedClassName === 'User' && _CoreManager.default.get('PERFORM_USER_REWRITE')) {\n        adjustedClassName = '_User';\n      }\n\n      var parentProto = ParseObject.prototype;\n\n      if (this.hasOwnProperty('__super__') && this.__super__) {\n        parentProto = this.prototype;\n      } else if (classMap[adjustedClassName]) {\n        parentProto = classMap[adjustedClassName].prototype;\n      }\n\n      var ParseObjectSubclass = function (attributes, options) {\n        this.className = adjustedClassName;\n        this._objCount = objectCount++; // Enable legacy initializers\n\n        if (typeof this.initialize === 'function') {\n          this.initialize.apply(this, arguments);\n        }\n\n        if (attributes && (0, _typeof2.default)(attributes) === 'object') {\n          if (!this.set(attributes || {}, options)) {\n            throw new Error(\"Can't create an invalid Parse Object\");\n          }\n        }\n      };\n\n      ParseObjectSubclass.className = adjustedClassName;\n      ParseObjectSubclass.__super__ = parentProto;\n      ParseObjectSubclass.prototype = (0, _create.default)(parentProto, {\n        constructor: {\n          value: ParseObjectSubclass,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      });\n\n      if (protoProps) {\n        for (var prop in protoProps) {\n          if (prop !== 'className') {\n            (0, _defineProperty2.default)(ParseObjectSubclass.prototype, prop, {\n              value: protoProps[prop],\n              enumerable: false,\n              writable: true,\n              configurable: true\n            });\n          }\n        }\n      }\n\n      if (classProps) {\n        for (var _prop in classProps) {\n          if (_prop !== 'className') {\n            (0, _defineProperty2.default)(ParseObjectSubclass, _prop, {\n              value: classProps[_prop],\n              enumerable: false,\n              writable: true,\n              configurable: true\n            });\n          }\n        }\n      }\n\n      ParseObjectSubclass.extend = function (name, protoProps, classProps) {\n        if (typeof name === 'string') {\n          return ParseObject.extend.call(ParseObjectSubclass, name, protoProps, classProps);\n        }\n\n        return ParseObject.extend.call(ParseObjectSubclass, adjustedClassName, name, protoProps);\n      };\n\n      ParseObjectSubclass.createWithoutData = ParseObject.createWithoutData;\n      classMap[adjustedClassName] = ParseObjectSubclass;\n      return ParseObjectSubclass;\n    }\n    /**\n     * Enable single instance objects, where any local objects with the same Id\n     * share the same attributes, and stay synchronized with each other.\n     * This is disabled by default in server environments, since it can lead to\n     * security issues.\n     *\n     * @static\n     */\n\n  }, {\n    key: \"enableSingleInstance\",\n    value: function () {\n      singleInstance = true;\n\n      _CoreManager.default.setObjectStateController(SingleInstanceStateController);\n    }\n    /**\n     * Disable single instance objects, where any local objects with the same Id\n     * share the same attributes, and stay synchronized with each other.\n     * When disabled, you can have two instances of the same object in memory\n     * without them sharing attributes.\n     *\n     * @static\n     */\n\n  }, {\n    key: \"disableSingleInstance\",\n    value: function () {\n      singleInstance = false;\n\n      _CoreManager.default.setObjectStateController(UniqueInstanceStateController);\n    }\n    /**\n     * Asynchronously stores the objects and every object they point to in the local datastore,\n     * recursively, using a default pin name: _default.\n     *\n     * If those other objects have not been fetched from Parse, they will not be stored.\n     * However, if they have changed data, all the changes will be retained.\n     *\n     * <pre>\n     * await Parse.Object.pinAll([...]);\n     * </pre>\n     *\n     * To retrieve object:\n     * <code>query.fromLocalDatastore()</code> or <code>query.fromPin()</code>\n     *\n     * @param {Array} objects A list of <code>Parse.Object</code>.\n     * @returns {Promise} A promise that is fulfilled when the pin completes.\n     * @static\n     */\n\n  }, {\n    key: \"pinAll\",\n    value: function (objects\n    /*: Array<ParseObject>*/\n    )\n    /*: Promise<void>*/\n    {\n      var localDatastore = _CoreManager.default.getLocalDatastore();\n\n      if (!localDatastore.isEnabled) {\n        return _promise.default.reject('Parse.enableLocalDatastore() must be called first');\n      }\n\n      return ParseObject.pinAllWithName(_LocalDatastoreUtils.DEFAULT_PIN, objects);\n    }\n    /**\n     * Asynchronously stores the objects and every object they point to in the local datastore, recursively.\n     *\n     * If those other objects have not been fetched from Parse, they will not be stored.\n     * However, if they have changed data, all the changes will be retained.\n     *\n     * <pre>\n     * await Parse.Object.pinAllWithName(name, [obj1, obj2, ...]);\n     * </pre>\n     *\n     * To retrieve object:\n     * <code>query.fromLocalDatastore()</code> or <code>query.fromPinWithName(name)</code>\n     *\n     * @param {string} name Name of Pin.\n     * @param {Array} objects A list of <code>Parse.Object</code>.\n     * @returns {Promise} A promise that is fulfilled when the pin completes.\n     * @static\n     */\n\n  }, {\n    key: \"pinAllWithName\",\n    value: function (name\n    /*: string*/\n    , objects\n    /*: Array<ParseObject>*/\n    )\n    /*: Promise<void>*/\n    {\n      var localDatastore = _CoreManager.default.getLocalDatastore();\n\n      if (!localDatastore.isEnabled) {\n        return _promise.default.reject('Parse.enableLocalDatastore() must be called first');\n      }\n\n      return localDatastore._handlePinAllWithName(name, objects);\n    }\n    /**\n     * Asynchronously removes the objects and every object they point to in the local datastore,\n     * recursively, using a default pin name: _default.\n     *\n     * <pre>\n     * await Parse.Object.unPinAll([...]);\n     * </pre>\n     *\n     * @param {Array} objects A list of <code>Parse.Object</code>.\n     * @returns {Promise} A promise that is fulfilled when the unPin completes.\n     * @static\n     */\n\n  }, {\n    key: \"unPinAll\",\n    value: function (objects\n    /*: Array<ParseObject>*/\n    )\n    /*: Promise<void>*/\n    {\n      var localDatastore = _CoreManager.default.getLocalDatastore();\n\n      if (!localDatastore.isEnabled) {\n        return _promise.default.reject('Parse.enableLocalDatastore() must be called first');\n      }\n\n      return ParseObject.unPinAllWithName(_LocalDatastoreUtils.DEFAULT_PIN, objects);\n    }\n    /**\n     * Asynchronously removes the objects and every object they point to in the local datastore, recursively.\n     *\n     * <pre>\n     * await Parse.Object.unPinAllWithName(name, [obj1, obj2, ...]);\n     * </pre>\n     *\n     * @param {string} name Name of Pin.\n     * @param {Array} objects A list of <code>Parse.Object</code>.\n     * @returns {Promise} A promise that is fulfilled when the unPin completes.\n     * @static\n     */\n\n  }, {\n    key: \"unPinAllWithName\",\n    value: function (name\n    /*: string*/\n    , objects\n    /*: Array<ParseObject>*/\n    )\n    /*: Promise<void>*/\n    {\n      var localDatastore = _CoreManager.default.getLocalDatastore();\n\n      if (!localDatastore.isEnabled) {\n        return _promise.default.reject('Parse.enableLocalDatastore() must be called first');\n      }\n\n      return localDatastore._handleUnPinAllWithName(name, objects);\n    }\n    /**\n     * Asynchronously removes all objects in the local datastore using a default pin name: _default.\n     *\n     * <pre>\n     * await Parse.Object.unPinAllObjects();\n     * </pre>\n     *\n     * @returns {Promise} A promise that is fulfilled when the unPin completes.\n     * @static\n     */\n\n  }, {\n    key: \"unPinAllObjects\",\n    value: function ()\n    /*: Promise<void>*/\n    {\n      var localDatastore = _CoreManager.default.getLocalDatastore();\n\n      if (!localDatastore.isEnabled) {\n        return _promise.default.reject('Parse.enableLocalDatastore() must be called first');\n      }\n\n      return localDatastore.unPinWithName(_LocalDatastoreUtils.DEFAULT_PIN);\n    }\n    /**\n     * Asynchronously removes all objects with the specified pin name.\n     * Deletes the pin name also.\n     *\n     * <pre>\n     * await Parse.Object.unPinAllObjectsWithName(name);\n     * </pre>\n     *\n     * @param {string} name Name of Pin.\n     * @returns {Promise} A promise that is fulfilled when the unPin completes.\n     * @static\n     */\n\n  }, {\n    key: \"unPinAllObjectsWithName\",\n    value: function (name\n    /*: string*/\n    )\n    /*: Promise<void>*/\n    {\n      var localDatastore = _CoreManager.default.getLocalDatastore();\n\n      if (!localDatastore.isEnabled) {\n        return _promise.default.reject('Parse.enableLocalDatastore() must be called first');\n      }\n\n      return localDatastore.unPinWithName(_LocalDatastoreUtils.PIN_PREFIX + name);\n    }\n  }]);\n  return ParseObject;\n}();\n\nvar DefaultController = {\n  fetch: function (target\n  /*: ParseObject | Array<ParseObject>*/\n  , forceFetch\n  /*: boolean*/\n  , options\n  /*: RequestOptions*/\n  )\n  /*: Promise<Array<void> | ParseObject>*/\n  {\n    var localDatastore = _CoreManager.default.getLocalDatastore();\n\n    if ((0, _isArray.default)(target)) {\n      if (target.length < 1) {\n        return _promise.default.resolve([]);\n      }\n\n      var objs = [];\n      var ids = [];\n      var className = null;\n      var results = [];\n      var error = null;\n      (0, _forEach.default)(target).call(target, function (el) {\n        if (error) {\n          return;\n        }\n\n        if (!className) {\n          className = el.className;\n        }\n\n        if (className !== el.className) {\n          error = new _ParseError.default(_ParseError.default.INVALID_CLASS_NAME, 'All objects should be of the same class');\n        }\n\n        if (!el.id) {\n          error = new _ParseError.default(_ParseError.default.MISSING_OBJECT_ID, 'All objects must have an ID');\n        }\n\n        if (forceFetch || !el.isDataAvailable()) {\n          ids.push(el.id);\n          objs.push(el);\n        }\n\n        results.push(el);\n      });\n\n      if (error) {\n        return _promise.default.reject(error);\n      }\n\n      var query = new _ParseQuery.default(className);\n      query.containedIn('objectId', ids);\n\n      if (options && options.include) {\n        query.include(options.include);\n      }\n\n      query._limit = ids.length;\n      return (0, _find.default)(query).call(query, options).then( /*#__PURE__*/function () {\n        var _ref = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee6(objects) {\n          var idMap, i, obj, _i, _obj, id, _iterator2, _step2, object;\n\n          return _regenerator.default.wrap(function (_context9) {\n            while (1) {\n              switch (_context9.prev = _context9.next) {\n                case 0:\n                  idMap = {};\n                  (0, _forEach.default)(objects).call(objects, function (o) {\n                    idMap[o.id] = o;\n                  });\n                  i = 0;\n\n                case 3:\n                  if (!(i < objs.length)) {\n                    _context9.next = 11;\n                    break;\n                  }\n\n                  obj = objs[i];\n\n                  if (!(!obj || !obj.id || !idMap[obj.id])) {\n                    _context9.next = 8;\n                    break;\n                  }\n\n                  if (!forceFetch) {\n                    _context9.next = 8;\n                    break;\n                  }\n\n                  return _context9.abrupt(\"return\", _promise.default.reject(new _ParseError.default(_ParseError.default.OBJECT_NOT_FOUND, 'All objects must exist on the server.')));\n\n                case 8:\n                  i++;\n                  _context9.next = 3;\n                  break;\n\n                case 11:\n                  if (!singleInstance) {\n                    // If single instance objects are disabled, we need to replace the\n                    for (_i = 0; _i < results.length; _i++) {\n                      _obj = results[_i];\n\n                      if (_obj && _obj.id && idMap[_obj.id]) {\n                        id = _obj.id;\n\n                        _obj._finishFetch(idMap[id].toJSON());\n\n                        results[_i] = idMap[id];\n                      }\n                    }\n                  }\n\n                  _iterator2 = _createForOfIteratorHelper(results);\n                  _context9.prev = 13;\n\n                  _iterator2.s();\n\n                case 15:\n                  if ((_step2 = _iterator2.n()).done) {\n                    _context9.next = 21;\n                    break;\n                  }\n\n                  object = _step2.value;\n                  _context9.next = 19;\n                  return localDatastore._updateObjectIfPinned(object);\n\n                case 19:\n                  _context9.next = 15;\n                  break;\n\n                case 21:\n                  _context9.next = 26;\n                  break;\n\n                case 23:\n                  _context9.prev = 23;\n                  _context9.t0 = _context9[\"catch\"](13);\n\n                  _iterator2.e(_context9.t0);\n\n                case 26:\n                  _context9.prev = 26;\n\n                  _iterator2.f();\n\n                  return _context9.finish(26);\n\n                case 29:\n                  return _context9.abrupt(\"return\", _promise.default.resolve(results));\n\n                case 30:\n                case \"end\":\n                  return _context9.stop();\n              }\n            }\n          }, _callee6, null, [[13, 23, 26, 29]]);\n        }));\n\n        return function () {\n          return _ref.apply(this, arguments);\n        };\n      }());\n    } else if (target instanceof ParseObject) {\n      if (!target.id) {\n        return _promise.default.reject(new _ParseError.default(_ParseError.default.MISSING_OBJECT_ID, 'Object does not have an ID'));\n      }\n\n      var RESTController = _CoreManager.default.getRESTController();\n\n      var params = {};\n\n      if (options && options.include) {\n        params.include = options.include.join();\n      }\n\n      return RESTController.request('GET', 'classes/' + target.className + '/' + target._getId(), params, options).then( /*#__PURE__*/function () {\n        var _ref2 = (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee7(response) {\n          return _regenerator.default.wrap(function (_context10) {\n            while (1) {\n              switch (_context10.prev = _context10.next) {\n                case 0:\n                  target._clearPendingOps();\n\n                  target._clearServerData();\n\n                  target._finishFetch(response);\n\n                  _context10.next = 5;\n                  return localDatastore._updateObjectIfPinned(target);\n\n                case 5:\n                  return _context10.abrupt(\"return\", target);\n\n                case 6:\n                case \"end\":\n                  return _context10.stop();\n              }\n            }\n          }, _callee7);\n        }));\n\n        return function () {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    }\n\n    return _promise.default.resolve();\n  },\n  destroy: function (target\n  /*: ParseObject | Array<ParseObject>*/\n  , options\n  /*: RequestOptions*/\n  )\n  /*: Promise<Array<void> | ParseObject>*/\n  {\n    return (0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee10() {\n      var batchSize, localDatastore, RESTController, batches, deleteCompleted, errors;\n      return _regenerator.default.wrap(function (_context13) {\n        while (1) {\n          switch (_context13.prev = _context13.next) {\n            case 0:\n              batchSize = options && options.batchSize ? options.batchSize : _CoreManager.default.get('REQUEST_BATCH_SIZE');\n              localDatastore = _CoreManager.default.getLocalDatastore();\n              RESTController = _CoreManager.default.getRESTController();\n\n              if (!(0, _isArray.default)(target)) {\n                _context13.next = 15;\n                break;\n              }\n\n              if (!(target.length < 1)) {\n                _context13.next = 6;\n                break;\n              }\n\n              return _context13.abrupt(\"return\", _promise.default.resolve([]));\n\n            case 6:\n              batches = [[]];\n              (0, _forEach.default)(target).call(target, function (obj) {\n                if (!obj.id) {\n                  return;\n                }\n\n                batches[batches.length - 1].push(obj);\n\n                if (batches[batches.length - 1].length >= batchSize) {\n                  batches.push([]);\n                }\n              });\n\n              if (batches[batches.length - 1].length === 0) {\n                // If the last batch is empty, remove it\n                batches.pop();\n              }\n\n              deleteCompleted = _promise.default.resolve();\n              errors = [];\n              (0, _forEach.default)(batches).call(batches, function (batch) {\n                deleteCompleted = deleteCompleted.then(function () {\n                  return RESTController.request('POST', 'batch', {\n                    requests: (0, _map.default)(batch).call(batch, function (obj) {\n                      return {\n                        method: 'DELETE',\n                        path: getServerUrlPath() + 'classes/' + obj.className + '/' + obj._getId(),\n                        body: {}\n                      };\n                    })\n                  }, options).then(function (results) {\n                    for (var i = 0; i < results.length; i++) {\n                      if (results[i] && results[i].hasOwnProperty('error')) {\n                        var err = new _ParseError.default(results[i].error.code, results[i].error.error);\n                        err.object = batch[i];\n                        errors.push(err);\n                      }\n                    }\n                  });\n                });\n              });\n              return _context13.abrupt(\"return\", deleteCompleted.then( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee8() {\n                var aggregate, _iterator3, _step3, object;\n\n                return _regenerator.default.wrap(function (_context11) {\n                  while (1) {\n                    switch (_context11.prev = _context11.next) {\n                      case 0:\n                        if (!errors.length) {\n                          _context11.next = 4;\n                          break;\n                        }\n\n                        aggregate = new _ParseError.default(_ParseError.default.AGGREGATE_ERROR);\n                        aggregate.errors = errors;\n                        return _context11.abrupt(\"return\", _promise.default.reject(aggregate));\n\n                      case 4:\n                        _iterator3 = _createForOfIteratorHelper(target);\n                        _context11.prev = 5;\n\n                        _iterator3.s();\n\n                      case 7:\n                        if ((_step3 = _iterator3.n()).done) {\n                          _context11.next = 13;\n                          break;\n                        }\n\n                        object = _step3.value;\n                        _context11.next = 11;\n                        return localDatastore._destroyObjectIfPinned(object);\n\n                      case 11:\n                        _context11.next = 7;\n                        break;\n\n                      case 13:\n                        _context11.next = 18;\n                        break;\n\n                      case 15:\n                        _context11.prev = 15;\n                        _context11.t0 = _context11[\"catch\"](5);\n\n                        _iterator3.e(_context11.t0);\n\n                      case 18:\n                        _context11.prev = 18;\n\n                        _iterator3.f();\n\n                        return _context11.finish(18);\n\n                      case 21:\n                        return _context11.abrupt(\"return\", _promise.default.resolve(target));\n\n                      case 22:\n                      case \"end\":\n                        return _context11.stop();\n                    }\n                  }\n                }, _callee8, null, [[5, 15, 18, 21]]);\n              }))));\n\n            case 15:\n              if (!(target instanceof ParseObject)) {\n                _context13.next = 17;\n                break;\n              }\n\n              return _context13.abrupt(\"return\", RESTController.request('DELETE', 'classes/' + target.className + '/' + target._getId(), {}, options).then( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee9() {\n                return _regenerator.default.wrap(function (_context12) {\n                  while (1) {\n                    switch (_context12.prev = _context12.next) {\n                      case 0:\n                        _context12.next = 2;\n                        return localDatastore._destroyObjectIfPinned(target);\n\n                      case 2:\n                        return _context12.abrupt(\"return\", _promise.default.resolve(target));\n\n                      case 3:\n                      case \"end\":\n                        return _context12.stop();\n                    }\n                  }\n                }, _callee9);\n              }))));\n\n            case 17:\n              return _context13.abrupt(\"return\", _promise.default.resolve(target));\n\n            case 18:\n            case \"end\":\n              return _context13.stop();\n          }\n        }\n      }, _callee10);\n    }))();\n  },\n  save: function (target\n  /*: ParseObject | Array<ParseObject | ParseFile>*/\n  , options\n  /*: RequestOptions*/\n  ) {\n    var batchSize = options && options.batchSize ? options.batchSize : _CoreManager.default.get('REQUEST_BATCH_SIZE');\n\n    var localDatastore = _CoreManager.default.getLocalDatastore();\n\n    var mapIdForPin = {};\n\n    var RESTController = _CoreManager.default.getRESTController();\n\n    var stateController = _CoreManager.default.getObjectStateController();\n\n    var allowCustomObjectId = _CoreManager.default.get('ALLOW_CUSTOM_OBJECT_ID');\n\n    options = options || {};\n    options.returnStatus = options.returnStatus || true;\n\n    if ((0, _isArray.default)(target)) {\n      if (target.length < 1) {\n        return _promise.default.resolve([]);\n      }\n\n      var unsaved = (0, _concat.default)(target).call(target);\n\n      for (var i = 0; i < target.length; i++) {\n        if (target[i] instanceof ParseObject) {\n          unsaved = (0, _concat.default)(unsaved).call(unsaved, (0, _unsavedChildren.default)(target[i], true));\n        }\n      }\n\n      unsaved = (0, _unique.default)(unsaved);\n      var filesSaved\n      /*: Array<ParseFile>*/\n      = [];\n      var pending\n      /*: Array<ParseObject>*/\n      = [];\n      (0, _forEach.default)(unsaved).call(unsaved, function (el) {\n        if (el instanceof _ParseFile.default) {\n          filesSaved.push(el.save(options));\n        } else if (el instanceof ParseObject) {\n          if (allowCustomObjectId && !el.id) {\n            throw new _ParseError.default(_ParseError.default.MISSING_OBJECT_ID, 'objectId must not be empty, null or undefined');\n          }\n\n          pending.push(el);\n        }\n      });\n      return _promise.default.all(filesSaved).then(function () {\n        var objectError = null;\n        return (0, _promiseUtils.continueWhile)(function () {\n          return pending.length > 0;\n        }, function () {\n          var batch = [];\n          var nextPending = [];\n          (0, _forEach.default)(pending).call(pending, function (el) {\n            if (batch.length < batchSize && (0, _canBeSerialized.default)(el)) {\n              batch.push(el);\n            } else {\n              nextPending.push(el);\n            }\n          });\n          pending = nextPending;\n\n          if (batch.length < 1) {\n            return _promise.default.reject(new _ParseError.default(_ParseError.default.OTHER_CAUSE, 'Tried to save a batch with a cycle.'));\n          } // Queue up tasks for each object in the batch.\n          // When every task is ready, the API request will execute\n\n\n          var batchReturned = new _promiseUtils.resolvingPromise();\n          var batchReady = [];\n          var batchTasks = [];\n          (0, _forEach.default)(batch).call(batch, function (obj, index) {\n            var ready = new _promiseUtils.resolvingPromise();\n            batchReady.push(ready);\n            stateController.pushPendingState(obj._getStateIdentifier());\n            batchTasks.push(stateController.enqueueTask(obj._getStateIdentifier(), function () {\n              ready.resolve();\n              return batchReturned.then(function (responses) {\n                if (responses[index].hasOwnProperty('success')) {\n                  var objectId = responses[index].success.objectId;\n                  var status = responses[index]._status;\n                  delete responses[index]._status;\n                  mapIdForPin[objectId] = obj._localId;\n\n                  obj._handleSaveResponse(responses[index].success, status);\n                } else {\n                  if (!objectError && responses[index].hasOwnProperty('error')) {\n                    var serverError = responses[index].error;\n                    objectError = new _ParseError.default(serverError.code, serverError.error); // Cancel the rest of the save\n\n                    pending = [];\n                  }\n\n                  obj._handleSaveError();\n                }\n              });\n            }));\n          });\n          (0, _promiseUtils.when)(batchReady).then(function () {\n            // Kick off the batch request\n            return RESTController.request('POST', 'batch', {\n              requests: (0, _map.default)(batch).call(batch, function (obj) {\n                var params = obj._getSaveParams();\n\n                params.path = getServerUrlPath() + params.path;\n                return params;\n              })\n            }, options);\n          }).then(batchReturned.resolve, function (error) {\n            batchReturned.reject(new _ParseError.default(_ParseError.default.INCORRECT_TYPE, error.message));\n          });\n          return (0, _promiseUtils.when)(batchTasks);\n        }).then( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee11() {\n          var _iterator4, _step4, object;\n\n          return _regenerator.default.wrap(function (_context14) {\n            while (1) {\n              switch (_context14.prev = _context14.next) {\n                case 0:\n                  if (!objectError) {\n                    _context14.next = 2;\n                    break;\n                  }\n\n                  return _context14.abrupt(\"return\", _promise.default.reject(objectError));\n\n                case 2:\n                  _iterator4 = _createForOfIteratorHelper(target);\n                  _context14.prev = 3;\n\n                  _iterator4.s();\n\n                case 5:\n                  if ((_step4 = _iterator4.n()).done) {\n                    _context14.next = 13;\n                    break;\n                  }\n\n                  object = _step4.value;\n                  _context14.next = 9;\n                  return localDatastore._updateLocalIdForObject(mapIdForPin[object.id], object);\n\n                case 9:\n                  _context14.next = 11;\n                  return localDatastore._updateObjectIfPinned(object);\n\n                case 11:\n                  _context14.next = 5;\n                  break;\n\n                case 13:\n                  _context14.next = 18;\n                  break;\n\n                case 15:\n                  _context14.prev = 15;\n                  _context14.t0 = _context14[\"catch\"](3);\n\n                  _iterator4.e(_context14.t0);\n\n                case 18:\n                  _context14.prev = 18;\n\n                  _iterator4.f();\n\n                  return _context14.finish(18);\n\n                case 21:\n                  return _context14.abrupt(\"return\", _promise.default.resolve(target));\n\n                case 22:\n                case \"end\":\n                  return _context14.stop();\n              }\n            }\n          }, _callee11, null, [[3, 15, 18, 21]]);\n        })));\n      });\n    } else if (target instanceof ParseObject) {\n      if (allowCustomObjectId && !target.id) {\n        throw new _ParseError.default(_ParseError.default.MISSING_OBJECT_ID, 'objectId must not be empty, null or undefined');\n      } // generate _localId in case if cascadeSave=false\n\n\n      target._getId();\n\n      var localId = target._localId; // copying target lets Flow guarantee the pointer isn't modified elsewhere\n\n      var targetCopy = target;\n\n      var task = function () {\n        var params = targetCopy._getSaveParams();\n\n        return RESTController.request(params.method, params.path, params.body, options).then(function (response) {\n          var status = response._status;\n          delete response._status;\n\n          targetCopy._handleSaveResponse(response, status);\n        }, function (error) {\n          targetCopy._handleSaveError();\n\n          return _promise.default.reject(error);\n        });\n      };\n\n      stateController.pushPendingState(target._getStateIdentifier());\n      return stateController.enqueueTask(target._getStateIdentifier(), task).then( /*#__PURE__*/(0, _asyncToGenerator2.default)( /*#__PURE__*/_regenerator.default.mark(function _callee12() {\n        return _regenerator.default.wrap(function (_context15) {\n          while (1) {\n            switch (_context15.prev = _context15.next) {\n              case 0:\n                _context15.next = 2;\n                return localDatastore._updateLocalIdForObject(localId, target);\n\n              case 2:\n                _context15.next = 4;\n                return localDatastore._updateObjectIfPinned(target);\n\n              case 4:\n                return _context15.abrupt(\"return\", target);\n\n              case 5:\n              case \"end\":\n                return _context15.stop();\n            }\n          }\n        }, _callee12);\n      })), function (error) {\n        return _promise.default.reject(error);\n      });\n    }\n\n    return _promise.default.resolve();\n  }\n};\n\n_CoreManager.default.setObjectController(DefaultController);\n\nvar _default = ParseObject;\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}